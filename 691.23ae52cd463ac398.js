(self.webpackChunkcartografia_app=self.webpackChunkcartografia_app||[]).push([[691],{9691:(I,J,c)=>{"use strict";c.r(J),c.d(J,{HomeProjectPageComponent:()=>N,ProjecHometModule:()=>D,ProjectRoutingModule:()=>A});var j=c(9132),h=c(5861),Z=c(8739),_=c(6308),a=c(671),S=c(5226),l=c.n(S),C=c(574),t=c(4650),u=c(4839),m=c(8443);class d{constructor(e){this.apiService=e}getGroupsProject(e){return this.apiService.getById("obtenerRolesProyecto",e)}guardarJerarquias(e){return this.apiService.patch("jerarquias",e)}getIdProject(e){return this.apiService.getById("proyectoId",e)}assignChiefUpms(e){return this.apiService.store("asignarUpmPersonal",e)}chargeUpmsChief(e){return this.apiService.store("obtenerUpmPersonal",e)}getUpmsAssgined(e){return this.apiService.store("obtenerUpmsAsignados",e)}getChiefEmployee(e){return this.apiService.store("obtenerEncargadoEmpleado",e)}getUsersAssigned(e){return this.apiService.store("obtenerPersonalAsignado",e)}assignPersonal(e){return this.apiService.store("asginarPersonal",e)}verDetalleSustitucion(e){return this.apiService.getById("detalleSustitucion",e)}supervisor(e){return this.apiService.store("detalleSupervisor",e)}cartografo(e){return this.apiService.store("detalleCartografo",e)}}d.\u0275fac=function(e){return new(e||d)(t.LFG(m.s))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var p=c(8049),b=c(4327);class x{constructor(){}exportAsExcelFile(e,o){const i={Sheets:{data:C.P6.json_to_sheet(e)},SheetNames:["data"]},s=C.cW(i,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(s,o)}saveAsExcelFile(e,o){const n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});b.saveAs(n,o+"_export_"+(new Date).getTime()+".xlsx")}}x.\u0275fac=function(e){return new(e||x)},x.\u0275prov=t.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"});var y=c(6895),g=c(9549),U=c(4144),T=c(4859),E=c(7392),L=c(4385),X=c(3238);function V(r,e){if(1&r&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.Q6J("value",o.id+","+o.nombre),t.xp6(1),t.hij(" ",o.nombre," ")}}function tt(r,e){1&r&&(t.TgZ(0,"th",30),t._uU(1,"Encargado"),t.qZA())}function et(r,e){if(1&r&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.encargado)}}function ot(r,e){1&r&&(t.TgZ(0,"th",30),t._uU(1,"Personal"),t.qZA())}function rt(r,e){if(1&r&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.empleado)}}function nt(r,e){1&r&&(t.TgZ(0,"th",32),t._uU(1,"Opciones"),t.qZA())}function it(r,e){1&r&&t._UZ(0,"td",31)}function at(r,e){1&r&&t._UZ(0,"tr",33)}function st(r,e){1&r&&t._UZ(0,"tr",34)}function ct(r,e){if(1&r&&(t.TgZ(0,"tr",35)(1,"td",36),t._uU(2),t.qZA()()),2&r){t.oxw();const o=t.MAs(39);t.xp6(2),t.hij(' No hay resultados de "',o.value,'" ')}}const lt=function(){return[5,10,25,100]};class q{constructor(e,o,n,i){this.groupService=e,this.projectHomeService=o,this.projectService=n,this.excelService=i,this.data=[[1,2],[3,4]],this.users=[],this.usernames=[],this.projectUserAssignment={usuario_id:0,proyecto_id:0},this.displayedColumns=["encargado","empleado","options"],this.dataSource=new a.by}ngOnInit(){let e=localStorage.getItem("id");Number(e)&&(this.projectUserAssignment.usuario_id=Number(e),this.projectHomeService.getIdProject(localStorage.getItem("project")||"").subscribe(o=>{this.projectUserAssignment.proyecto_id=o,this.idProject=o,this.getGroupsMinor(),this.getChiefEmployee()})),this.projectHomeService.getIdProject(localStorage.getItem("project")||"").subscribe(o=>{this.idProject=o})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getGroupsMinor(){var e=this;return(0,h.Z)(function*(){e.groupService.getGroupsMinor(e.projectUserAssignment).subscribe(o=>{e.groups=o})})()}getUsers(e){let o=Number(localStorage.getItem("id")),n=e.split(",");this.users=[],this.usernames=[],this.projectHomeService.getUsersAssigned({rol_id:Number(n[0]),proyecto_id:this.idProject,usuario_id:o}).subscribe(i=>{this.usernames=i,this.usernames.forEach(s=>{this.users.push({encargado:"",codigo_usuario:s.codigo_usuario,nombres:s.nombres,apellidos:s.apellidos})}),this.excelService.exportAsExcelFile(this.users,n[1])})}addFile(){var e=this;return(0,h.Z)(function*(){const{value:o}=yield l().fire({title:"Seleccione archivo",input:"file",inputAttributes:{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}});if(o){const n=new FileReader;n.onload=i=>{const f=C.ij(i.target.result,{type:"binary"});e.data=C.P6.sheet_to_json(f.Sheets[f.SheetNames[0]],{header:1}),e.generateJson()},n.readAsBinaryString(o)}})()}generateJson(){let e=Number(localStorage.getItem("id"));if(Number(e)){let o=[];this.data.forEach(n=>{n[0]&&n[1]&&o.push({codigo_superior:n[0],codigo_inferior:n[1],proyecto_id:this.idProject,usuario_id:e})}),o=o.filter(Boolean),this.projectHomeService.assignPersonal(o).subscribe(n=>{1==n.status&&(l().fire("Ok!",n.message,"success"),this.getChiefEmployee())})}}getChiefEmployee(){let e=Number(localStorage.getItem("id"));this.projectHomeService.getChiefEmployee({usuario_id:e,proyecto_id:this.idProject}).subscribe(o=>{this.dataSource=new a.by(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}verPlantilla(){l().fire({text:"Ejemplo de plantilla",imageUrl:"assets/EjemploPlantillaPersonal.png",imageWidth:375,imageHeight:250,imageAlt:"Ejemplo del archivo de carga"})}}q.\u0275fac=function(e){return new(e||q)(t.Y36(u.GroupService),t.Y36(d),t.Y36(p.Y),t.Y36(x))},q.\u0275cmp=t.Xpm({type:q,selectors:[["app-asignar-personal"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Z.NW,5),t.Gf(_.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},decls:58,vars:13,consts:[[1,"title"],[1,"container"],["appearance","outline",2,"width","25rem"],["rol",""],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","accent",3,"disabled","click"],[1,"upms"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","accent",2,"margin-right","8px",3,"click"],[1,"grid-container"],[1,"frow-container"],[1,"frow","row-start"],[1,"col-sm-1-1","col-sm-3-12","col-md-3-12"],["appearence","outline",1,"fluid"],["matInput","","placeholder","Ejemplo: AEE123456789A2",3,"keyup"],["input",""],["matSuffix",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"fluid",3,"dataSource"],["matColumnDef","encargado"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cell-pointer","mat-cell","",4,"matCellDef"],["matColumnDef","empleado"],["matColumnDef","options"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","selected-row","mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"cell-pointer"],["mat-header-cell",""],["mat-header-row",""],["mat-row","",1,"selected-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Asignacion de Personal"),t.qZA()(),t._UZ(3,"br")(4,"br"),t.TgZ(5,"div",1)(6,"div")(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Seleccione un Rol"),t.qZA(),t.TgZ(10,"mat-select",null,3),t.YNc(12,V,2,2,"mat-option",4),t.qZA()()(),t.TgZ(13,"div")(14,"div")(15,"button",5),t.NdJ("click",function(){t.CHM(n);const s=t.MAs(11);return t.KtG(o.getUsers(s.value))}),t.TgZ(16,"mat-icon"),t._uU(17,"arrow_downward"),t.qZA(),t._uU(18," Descargar Plantilla "),t.qZA()(),t._UZ(19,"br"),t.TgZ(20,"div",6)(21,"button",7),t.NdJ("click",function(){return o.addFile()}),t.TgZ(22,"mat-icon"),t._uU(23,"arrow_upward"),t.qZA(),t._uU(24," Cargar Archivo "),t.qZA()(),t._UZ(25,"br"),t.TgZ(26,"div")(27,"button",8),t.NdJ("click",function(){return o.verPlantilla()}),t.TgZ(28,"mat-icon"),t._uU(29,"remove_red_eye"),t.qZA(),t._uU(30," Ver ejemplo de archivo de carga "),t.qZA()()()(),t.TgZ(31,"div",9)(32,"div",10)(33,"div",11)(34,"div",12)(35,"mat-form-field",13)(36,"mat-label"),t._uU(37,"Buscar"),t.qZA(),t.TgZ(38,"input",14,15),t.NdJ("keyup",function(s){return o.applyFilter(s)}),t.qZA(),t.TgZ(40,"mat-icon",16),t._uU(41,"search"),t.qZA()()()(),t.TgZ(42,"div",17)(43,"table",18),t.ynx(44,19),t.YNc(45,tt,2,0,"th",20),t.YNc(46,et,2,1,"td",21),t.BQk(),t.ynx(47,22),t.YNc(48,ot,2,0,"th",20),t.YNc(49,rt,2,1,"td",21),t.BQk(),t.ynx(50,23),t.YNc(51,nt,2,0,"th",24),t.YNc(52,it,1,0,"td",21),t.BQk(),t.YNc(53,at,1,0,"tr",25),t.YNc(54,st,1,0,"tr",26),t.YNc(55,ct,3,1,"tr",27),t.qZA(),t._UZ(56,"br")(57,"mat-paginator",28),t.qZA()()()}if(2&e){const n=t.MAs(11);t.xp6(8),t.Udp("font-size",16,"px"),t.xp6(4),t.Q6J("ngForOf",o.groups),t.xp6(3),t.Q6J("disabled",!n.value),t.xp6(20),t.Udp("font-size",12,"px"),t.xp6(1),t.Udp("font-size",14,"px"),t.xp6(7),t.Q6J("dataSource",o.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(3),t.Q6J("pageSizeOptions",t.DdM(12,lt))}},dependencies:[y.sg,g.KE,g.hX,g.R9,U.Nt,T.lW,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,a.Ee,E.Hw,Z.NW,L.gD,X.ey,_.YE,_.nU],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}"]});var v=c(4006),O=c(7274),$=c(266);function ut(r,e){1&r&&(t.TgZ(0,"th",24),t._uU(1,"Departamento"),t.qZA())}function pt(r,e){if(1&r&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.departamento)}}function mt(r,e){1&r&&(t.TgZ(0,"th",24),t._uU(1,"Municipio"),t.qZA())}function dt(r,e){if(1&r&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.municipio)}}function gt(r,e){1&r&&(t.TgZ(0,"th",24),t._uU(1,"UPM"),t.qZA())}function _t(r,e){if(1&r&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.upm)}}function ft(r,e){1&r&&(t.TgZ(0,"th",24),t._uU(1,"Estado"),t.qZA())}function ht(r,e){if(1&r&&(t.TgZ(0,"button",28),t._uU(1),t.qZA()),2&r){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.estado," ")}}function bt(r,e){if(1&r&&(t.TgZ(0,"button",29),t._uU(1),t.qZA()),2&r){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.estado," ")}}function Ct(r,e){if(1&r&&(t.TgZ(0,"td",25),t.YNc(1,ht,2,1,"button",26),t.YNc(2,bt,2,1,"button",27),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Q6J("ngIf","Cargado"==o.estado),t.xp6(1),t.Q6J("ngIf","Sustituido"==o.estado)}}function vt(r,e){1&r&&t._UZ(0,"th",30)}function Zt(r,e){1&r&&(t.TgZ(0,"td",25)(1,"div")(2,"button",31)(3,"mat-icon"),t._uU(4,"power_settings_new"),t.qZA()()(),t.TgZ(5,"div")(6,"button",32)(7,"mat-icon",33),t._uU(8,"done"),t.qZA()()()())}function xt(r,e){1&r&&t._UZ(0,"tr",34)}function Ut(r,e){1&r&&t._UZ(0,"tr",35)}function yt(r,e){if(1&r&&(t.TgZ(0,"tr",36)(1,"td",37),t._uU(2),t.qZA()()),2&r){t.oxw();const o=t.MAs(11);t.xp6(2),t.hij(' No hay resultados de "',o.value,'" ')}}const Tt=function(){return[10,25,100]};class M{constructor(e,o,n,i){this.formBuilder=e,this.dialog=o,this.homeProjectService=n,this.projectService=i,this.displayedColumns=["departamento","municipio","upm","estado","options"],this.data=[],this.assignment={proyecto_id:0,upms:[]},this.upmDataSust={proyecto_id:0,upm_nuevo:"",upm_anterior:0,descripcion:"",usuario_id:0},this.dataSource=new a.by,this.buildForm()}buildForm(){this.formUpms=this.formBuilder.group({file:[""]})}ngOnInit(){this.homeProjectService.getIdProject(localStorage.getItem("project")||"").subscribe(e=>{this.idSupervisor=e,this.cargarUpmsAsignadas()})}cargarUpmsAsignadas(){0!=this.idSupervisor&&this.projectService.getUpms(this.idSupervisor).subscribe(e=>{this.dataSource=new a.by(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}}function wt(r,e){if(1&r&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.Q6J("value",o.id+","+o.nombre),t.xp6(1),t.hij(" ",o.nombre," ")}}function At(r,e){1&r&&(t.TgZ(0,"th",32),t._uU(1,"Rol"),t.qZA())}function Pt(r,e){if(1&r&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.rol)}}function jt(r,e){1&r&&(t.TgZ(0,"th",32),t._uU(1,"Encargado"),t.qZA())}function St(r,e){if(1&r&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.encargado)}}function Nt(r,e){1&r&&(t.TgZ(0,"th",32),t._uU(1,"UPM"),t.qZA())}function Dt(r,e){if(1&r&&(t.TgZ(0,"td",33),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.upm)}}function Et(r,e){1&r&&(t.TgZ(0,"th",34),t._uU(1,"Opciones"),t.qZA())}function qt(r,e){1&r&&t._UZ(0,"td",33)}function Ot(r,e){1&r&&t._UZ(0,"tr",35)}function Mt(r,e){1&r&&t._UZ(0,"tr",36)}function kt(r,e){if(1&r&&(t.TgZ(0,"tr",37)(1,"td",38),t._uU(2),t.qZA()()),2&r){t.oxw();const o=t.MAs(46);t.xp6(2),t.hij(' No hay resultados de "',o.value,'" ')}}M.\u0275fac=function(e){return new(e||M)(t.Y36(v.qu),t.Y36(O.uw),t.Y36(d),t.Y36(p.Y))},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-cartographer"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Z.NW,5),t.Gf(_.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},decls:36,vars:9,consts:[[1,"grid-container"],[1,"frow-container"],[1,"frow","row-start"],[1,"col-sm-1-1","col-sm-6-12","col-md-6-12"],[1,"col-sm-1-1","col-sm-3-12","col-md-3-12"],["appearance","outline",1,"fluid"],["matInput","","placeholder","Ejemplo: AEE010100005A1",3,"keyup"],["input",""],["matSuffix",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"fluid",3,"dataSource"],["matColumnDef","departamento"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cell-pointer","mat-cell","",4,"matCellDef"],["matColumnDef","municipio"],["matColumnDef","upm"],["matColumnDef","estado"],["matColumnDef","options"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","selected-row","mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["paginator",""],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"cell-pointer"],["mat-stroked-button","","color","primary","class","estado",4,"ngIf"],["mat-stroked-button","","color","warn","class","estado",4,"ngIf"],["mat-stroked-button","","color","primary",1,"estado"],["mat-stroked-button","","color","warn",1,"estado"],["mat-header-cell",""],["matTooltip","Iniciar UPM","matTooltipPosition","right"],["matTooltip","Finalizar UPM","matTooltipPosition","left"],["aria-label","Home"],["mat-header-row",""],["mat-row","",1,"selected-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),t._uU(5,"\xc1rea de Cartografo"),t.qZA()(),t.TgZ(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Buscar"),t.qZA(),t.TgZ(10,"input",6,7),t.NdJ("keyup",function(i){return o.applyFilter(i)}),t.qZA(),t.TgZ(12,"mat-icon",8),t._uU(13,"search"),t.qZA()()()(),t.TgZ(14,"div",9)(15,"table",10),t.ynx(16,11),t.YNc(17,ut,2,0,"th",12),t.YNc(18,pt,2,1,"td",13),t.BQk(),t.ynx(19,14),t.YNc(20,mt,2,0,"th",12),t.YNc(21,dt,2,1,"td",13),t.BQk(),t.ynx(22,15),t.YNc(23,gt,2,0,"th",12),t.YNc(24,_t,2,1,"td",13),t.BQk(),t.ynx(25,16),t.YNc(26,ft,2,0,"th",12),t.YNc(27,Ct,3,2,"td",13),t.BQk(),t.ynx(28,17),t.YNc(29,vt,1,0,"th",18),t.YNc(30,Zt,9,0,"td",13),t.BQk(),t.YNc(31,xt,1,0,"tr",19),t.YNc(32,Ut,1,0,"tr",20),t.YNc(33,yt,3,1,"tr",21),t.qZA(),t._UZ(34,"mat-paginator",22,23),t.qZA()()()),2&e&&(t.xp6(7),t.Udp("font-size",12,"px"),t.xp6(1),t.Udp("font-size",14,"px"),t.xp6(7),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(8,Tt)))},dependencies:[y.O5,g.KE,g.hX,g.R9,U.Nt,T.lW,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,a.Ee,E.Hw,Z.NW,$.gM,_.YE,_.nU],styles:[".table[_ngcontent-%COMP%]{width:100%;margin:0 0 3rem}.table_div[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;max-width:98%;margin:0 auto;display:flex}.full-width-input[_ngcontent-%COMP%]{width:100% auto;padding:1em}.example-section[_ngcontent-%COMP%]{margin:12px}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.header[_ngcontent-%COMP%]{display:flex;margin:.5rem;padding:0 .4rem;gap:1rem}.container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]});const Yt=function(){return[5,10,25,100]};class k{constructor(e,o,n,i){this.groupService=e,this.projectHomeService=o,this.projectService=n,this.excelService=i,this.users=[],this.data=[[1,2],[3,4]],this.displayedColumns=["rol","encargado","upm","options"],this.datos=[],this.dataFile=[],this.nameUpms=[],this.projectUserAssignment={usuario_id:0,proyecto_id:0},this.dataSource=new a.by}ngOnInit(){let e=localStorage.getItem("id");Number(e)&&(this.projectUserAssignment.usuario_id=Number(e),this.projectHomeService.getIdProject(localStorage.getItem("project")||"").subscribe(o=>{this.projectUserAssignment.proyecto_id=o,this.idProject=o,this.getGroupsMinor(),this.cargarUpmChief()}))}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}getGroupsMinor(){var e=this;return(0,h.Z)(function*(){e.groupService.getGroupsMinor(e.projectUserAssignment).subscribe(o=>{e.groups=o})})()}verPlantilla(){l().fire({text:"Ejemplo de plantilla",imageUrl:"assets/EjemploPlantillaUPMUsuario.png",imageWidth:460,imageHeight:200,imageAlt:"Ejemplo del archivo de carga"})}getUpmsAsignn(e){var o=this;return(0,h.Z)(function*(){let n=localStorage.getItem("id");o.nameUpms=[];let i=e.split(",");Number(o.idProject)&&o.projectHomeService.getUpmsAssgined({proyecto_id:o.idProject,usuario_id:n}).subscribe(s=>{s.forEach(f=>{o.nameUpms.push(f.upm)}),o.getUsersAssign(i[0],i[1])})})()}getUsersAssign(e,o){this.users=[];let n=localStorage.getItem("id");this.projectHomeService.getUsersAssigned({proyecto_id:this.idProject,rol_id:e,usuario_id:n}).subscribe(i=>{this.users=i,this.createFile(o)})}createFile(e){this.dataFile=[];for(let o=0;o<this.nameUpms.length;o++)this.dataFile.push({upm:this.nameUpms[o],codigo_usuario:"",nombres:"",apellidos:""});for(let o=0;o<this.users.length;o++)this.dataFile.push({codigo_usuario:this.users[o].codigo_usuario,nombres:this.users[o].nombres,apellidos:this.users[o].apellidos});this.excelService.exportAsExcelFile(this.dataFile,"AsignacionUPMS"+e)}addFile(){var e=this;return(0,h.Z)(function*(){e.data=[];const{value:o}=yield l().fire({title:"Seleccione archivo",input:"file",inputAttributes:{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}});if(o){const n=new FileReader;n.onload=i=>{const f=C.ij(i.target.result,{type:"binary"});e.data=C.P6.sheet_to_json(f.Sheets[f.SheetNames[0]],{header:1}),e.generateJson()},n.readAsBinaryString(o)}})()}generateJson(){let e=[];this.data=this.data.filter(Boolean),this.data.forEach(o=>{o[0]&&o[1]&&e.push({upm:o[0],codigo_usuario:o[1],proyecto_id:this.idProject})}),this.projectHomeService.assignChiefUpms(e).subscribe(o=>{1==o.status&&(this.cargarUpmChief(),l().fire("Ok!",o.message,"success"))})}cargarUpmChief(){let e=localStorage.getItem("id");this.projectHomeService.chargeUpmsChief({proyecto_id:this.idProject,usuario_id:e}).subscribe(o=>{this.dataSource=new a.by(o),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}}k.\u0275fac=function(e){return new(e||k)(t.Y36(u.GroupService),t.Y36(d),t.Y36(p.Y),t.Y36(x))},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-encargado-upms"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Z.NW,5),t.Gf(_.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},decls:68,vars:13,consts:[[1,"title"],[1,"container"],["appearance","outline",2,"width","25rem"],["rol",""],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","","color","accent",3,"disabled","click"],["mat-flat-button","","color","accent",2,"margin-right","8px"],[1,"upms"],["mat-flat-button","","color","accent",3,"click"],["mat-flat-button","","color","accent",2,"margin-right","8px",3,"click"],[1,"grid-container"],[1,"frow-container"],[1,"frow","row-start"],[1,"col-sm-1-1","col-sm-3-12","col-md-3-12"],["appearence","outline",1,"fluid"],["matInput","","placeholder","Ejemplo: AEE123456789A2",3,"keyup"],["input",""],["matSuffix",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"fluid",3,"dataSource"],["matColumnDef","rol"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cell-pointer","mat-cell","",4,"matCellDef"],["matColumnDef","encargado"],["matColumnDef","upm"],["matColumnDef","options"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","selected-row","mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"cell-pointer"],["mat-header-cell",""],["mat-header-row",""],["mat-row","",1,"selected-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Asignacion de UPMS"),t.qZA()(),t._UZ(3,"br")(4,"br"),t.TgZ(5,"div",1)(6,"div")(7,"mat-form-field",2)(8,"mat-label"),t._uU(9,"Seleccione un Rol"),t.qZA(),t.TgZ(10,"mat-select",null,3),t.YNc(12,wt,2,2,"mat-option",4),t.qZA()()(),t.TgZ(13,"div")(14,"div")(15,"button",5),t.NdJ("click",function(){t.CHM(n);const s=t.MAs(11);return t.KtG(o.getUpmsAsignn(s.value))}),t.TgZ(16,"mat-icon"),t._uU(17,"arrow_downward"),t.qZA(),t._uU(18," Descargar Plantilla "),t.qZA()(),t._UZ(19,"br"),t.TgZ(20,"div")(21,"button",6)(22,"mat-icon"),t._uU(23,"add"),t.qZA(),t._uU(24," Agregar "),t.qZA()(),t._UZ(25,"br"),t.TgZ(26,"div",7)(27,"button",8),t.NdJ("click",function(){return o.addFile()}),t.TgZ(28,"mat-icon"),t._uU(29,"arrow_upward"),t.qZA(),t._uU(30," Cargar Archivo "),t.qZA()(),t._UZ(31,"br"),t.TgZ(32,"div")(33,"button",9),t.NdJ("click",function(){return o.verPlantilla()}),t.TgZ(34,"mat-icon"),t._uU(35,"remove_red_eye"),t.qZA(),t._uU(36," Ver ejemplo de archivo de carga "),t.qZA()()()(),t._UZ(37,"br"),t.TgZ(38,"div",10)(39,"div",11)(40,"div",12)(41,"div",13)(42,"mat-form-field",14)(43,"mat-label"),t._uU(44,"Buscar"),t.qZA(),t.TgZ(45,"input",15,16),t.NdJ("keyup",function(s){return o.applyFilter(s)}),t.qZA(),t.TgZ(47,"mat-icon",17),t._uU(48,"search"),t.qZA()()()(),t.TgZ(49,"div",18)(50,"table",19),t.ynx(51,20),t.YNc(52,At,2,0,"th",21),t.YNc(53,Pt,2,1,"td",22),t.BQk(),t.ynx(54,23),t.YNc(55,jt,2,0,"th",21),t.YNc(56,St,2,1,"td",22),t.BQk(),t.ynx(57,24),t.YNc(58,Nt,2,0,"th",21),t.YNc(59,Dt,2,1,"td",22),t.BQk(),t.ynx(60,25),t.YNc(61,Et,2,0,"th",26),t.YNc(62,qt,1,0,"td",22),t.BQk(),t.YNc(63,Ot,1,0,"tr",27),t.YNc(64,Mt,1,0,"tr",28),t.YNc(65,kt,3,1,"tr",29),t.qZA(),t._UZ(66,"br")(67,"mat-paginator",30),t.qZA()()()}if(2&e){const n=t.MAs(11);t.xp6(8),t.Udp("font-size",16,"px"),t.xp6(4),t.Q6J("ngForOf",o.groups),t.xp6(3),t.Q6J("disabled",!n.value),t.xp6(27),t.Udp("font-size",12,"px"),t.xp6(1),t.Udp("font-size",14,"px"),t.xp6(7),t.Q6J("dataSource",o.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(3),t.Q6J("pageSizeOptions",t.DdM(12,Yt))}},dependencies:[y.sg,g.KE,g.hX,g.R9,U.Nt,T.lW,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,a.Ee,E.Hw,Z.NW,L.gD,X.ey,_.YE,_.nU],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center}.title[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}"]});class Y{}Y.\u0275fac=function(e){return new(e||Y)},Y.\u0275cmp=t.Xpm({type:Y,selectors:[["app-supervisor"]],decls:2,vars:0,template:function(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"supervisor works!"),t.qZA())}});var Gt=c(1572),K=c(3848),Q=c(4954),H=c(1206),Ft=c(7559),Rt=c(6525),Jt=c(3995);function Bt(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Nombre de rol es "),t.TgZ(2,"strong"),t._uU(3,"requerido"),t.qZA()())}function Qt(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.createGroup())}),t._uU(1," Guardar Rol "),t.qZA()}if(2&r){const o=t.oxw();t.Q6J("disabled",!o.groupForm.valid)}}const Ht=function(){return["crear-grupo"]};class G{constructor(e,o,n,i,s){this.groupService=e,this.data=o,this.projectService=n,this.formBuilder=i,this.dialogRef=s,this.buildForm()}buildForm(){this.groupForm=this.formBuilder.group({nombre:["",v.kI.required],descripcion:[""],proyecto_id:[this.data,[v.kI.required]]})}get Nombre(){return this.groupForm.get("nombre")}get Descripcion(){return this.groupForm.get("descripcion")}get ProyectoId(){return this.groupForm.get("proyecto_id")}get Jerarquia(){return this.groupForm.get("jerarquia")}submit(){}createGroup(){this.groupForm.valid&&this.groupService.create(this.groupForm.value).subscribe(e=>{1==e.status&&(l().fire("Ok!",e.message,"success"),this.dialogRef.close(1))})}cancelAdd(){this.dialogRef.close()}}G.\u0275fac=function(e){return new(e||G)(t.Y36(u.GroupService),t.Y36(O.WI),t.Y36(p.Y),t.Y36(v.qu),t.Y36(O.so))},G.\u0275cmp=t.Xpm({type:G,selectors:[["app-new-group-project"]],decls:19,vars:8,consts:[[1,"card"],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","text","formControlName","nombre","matInput","","placeholder","Supervisores ENEI","required","",1,"form-control"],[4,"ngIf"],["type","text","formControlName","descripcion","placeholder","Grupo 2026","matInput","",1,"form-control"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("submit",function(){return o.submit()}),t.TgZ(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),t._uU(6,"Ingrese el Nombre del Rol"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,Bt,4,0,"mat-error",6),t.qZA()(),t.TgZ(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),t._uU(12,"Descripcion(Opcional)"),t.qZA(),t._UZ(13,"input",7),t.qZA()(),t.TgZ(14,"div",3),t.YNc(15,Qt,2,1,"button",8),t._UZ(16,"br"),t.TgZ(17,"button",9),t.NdJ("click",function(){return o.cancelAdd()}),t._uU(18," Cancelar "),t.qZA()()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.groupForm),t.xp6(3),t.Udp("font-size",16,"px"),t.xp6(3),t.Q6J("ngIf",(null==o.Nombre?null:o.Nombre.touched)&&(null==o.Nombre?null:o.Nombre.hasError("required"))),t.xp6(3),t.Udp("font-size",16,"px"),t.xp6(4),t.Q6J("ngxPermissionsOnly",t.DdM(7,Ht)))},dependencies:[y.O5,g.KE,g.hX,g.TO,U.Nt,T.lW,v._Y,v.Fj,v.JJ,v.JL,v.Q7,v.sg,v.u,Q.gE],styles:[".full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;max-width:98%;margin:0 auto;display:flex}.example-section[_ngcontent-%COMP%]{max-width:98%;margin:0 auto;display:flex}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.card[_ngcontent-%COMP%]{padding:3rem}"]});const It=["table"];function zt(r,e){1&r&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"ID"),t.qZA())}function $t(r,e){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.id)}}function Lt(r,e){1&r&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Nombre"),t.qZA())}function Xt(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"mat-cell")(1,"mat-icon",16),t.NdJ("mousedown",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.dragDisabled=!1)}),t._uU(2,"reorder"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()}if(2&r){const o=e.$implicit;t.xp6(4),t.Oqu(o.nombre)}}function Kt(r,e){1&r&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Orden"),t.qZA())}function Wt(r,e){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.jerarquia)}}function Vt(r,e){1&r&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Descripcion"),t.qZA())}function te(r,e){if(1&r&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.descripcion)}}function ee(r,e){1&r&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Acciones"),t.qZA())}function oe(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.editar(i.id,i.nombre,i.descripcion,i.proyecto_id))}),t.TgZ(1,"mat-icon",24),t._uU(2,"edit"),t.qZA()()}}function re(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.desactivar(i.id,i.nombre))}),t.TgZ(1,"mat-icon",26),t._uU(2,"delete"),t.qZA()()}}function ne(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.verUsuarios(i.id,i.nombre))}),t.TgZ(1,"mat-icon"),t._uU(2,"supervised_user_circle"),t.qZA()()}}function ie(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.addUser(i.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA()()}}function ae(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.addFile(i.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"arrow_upward"),t.qZA()()}}function se(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.verRoles(i.id,i.nombre))}),t.TgZ(1,"mat-icon"),t._uU(2,"list_alt"),t.qZA()()}}const ce=function(){return["editar-grupo"]},le=function(){return["desactivar-grupo"]},ue=function(){return["ver-usuario-grupo"]},W=function(){return["asignar-usuario-grupo"]},pe=function(){return["asignar-rol-grupo"]};function me(r,e){1&r&&(t.TgZ(0,"mat-cell"),t.YNc(1,oe,3,0,"button",17),t.YNc(2,re,3,0,"button",18),t.YNc(3,ne,3,0,"button",19),t.YNc(4,ie,3,0,"button",20),t.YNc(5,ae,3,0,"button",21),t.YNc(6,se,3,0,"button",22),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(6,ce)),t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(7,le)),t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(8,ue)),t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(9,W)),t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(10,W)),t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(11,pe)))}function de(r,e){1&r&&t._UZ(0,"mat-header-row")}function ge(r,e){1&r&&t._UZ(0,"mat-row",31),2&r&&t.Q6J("cdkDragData",e.$implicit)}function _e(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.createGroup())}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA(),t._uU(3," Crear Rol "),t.qZA()}}const fe=function(){return["crear-grupo"]};class F{constructor(e,o,n){this.projectHomeService=e,this.groupService=o,this.dialogService=n,this.data=[],this.displayedColumns=["nombre","jerarquia","descripcion","options"],this.dragDisabled=!0,this.project="",this.group={id:0,jerarquia:0,nombre:"",descripcion:"",proyecto_id:0,proyecto:""},this.userData={nombres:"",rol_id:0,apellidos:"",codigo_usuario:0,proyecto:""},this.roleData={id:0,nombre:"",roles:[]},this.userDataFile={rol_id:0,usuarios:[],proyecto:""}}ngOnInit(){this.project=localStorage.getItem("project")||"",this.cargarGrupos()}drop(e){this.dragDisabled=!0,this.dataSource.find(s=>s==e.item.data);const i=this.dataSource.findIndex(s=>s==e.item.data);(0,H.bA)(this.dataSource,i,e.currentIndex),this.table.renderRows(),this.ordenarJerarquias()}ordenarJerarquias(){for(let e=0;e<this.dataSource.length;e++)for(let o=0;o<this.dataSource.length;o++)(this.dataSource[e].jerarquia>this.dataSource[o].jerarquia||this.dataSource[e].jerarquia==this.dataSource[o].jerarquia)&&(this.dataSource[e].jerarquia=this.dataSource.length-e)}desactivar(e,o){l().fire({title:"\xbfEsta seguro que desea Desactivar el rol: "+o+"?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(n=>{n.isConfirmed?this.groupService.desactiveGroup(Number(e)).subscribe(i=>{1==i.status&&(this.cargarGrupos(),l().fire("Ok!","Rol desactivado","success"))}):n.isDenied&&l().fire("Cambios no guardados","","info")})}editar(e,o,n,i){this.group.id=Number(e),this.group.nombre=o,this.group.descripcion=n,this.group.proyecto_id=Number(i),this.dialogService.open(Ft.e,{height:"20rem",width:"50rem",data:this.group}).afterClosed().subscribe(f=>{1===f&&this.cargarGrupos()})}addUser(e){var o=this;return(0,h.Z)(function*(){const{value:n}=yield l().fire({title:"Usuario",input:"number",inputPlaceholder:"juan2022",confirmButtonText:"Agregar Usuario",showCancelButton:!0,cancelButtonText:"Cancelar",inputLabel:"Ingrese el codigo de usuario"});n&&(o.userData.rol_id=Number(e),o.userData.proyecto=o.project,o.userData.codigo_usuario=n,o.groupService.addUserToGroup(o.userData).subscribe(i=>{1==i.status&&l().fire("Ok!",i.message,"success")}))})()}addFile(e){var o=this;return(0,h.Z)(function*(){const{value:n}=yield l().fire({html:"<label>El archivo debe tener una lista con los codigo de usuario</label>",title:"Seleccione archivo",input:"file",inputAttributes:{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}});if(n){o.userDataFile.rol_id=Number(e),o.userDataFile.proyecto=o.project;const i=new FileReader;i.onload=s=>{const w=C.ij(s.target.result,{type:"binary"});o.data=C.P6.sheet_to_json(w.Sheets[w.SheetNames[0]],{header:1}),o.generateJsonUsers()},i.readAsBinaryString(n)}})()}generateJsonUsers(){var e=this;return(0,h.Z)(function*(){e.userDataFile.usuarios=[],e.data.forEach(o=>{e.userDataFile.usuarios.push(o[0])}),e.userDataFile.usuarios=e.userDataFile.usuarios.filter(Boolean),e.groupService.assignGroupUsersFile(e.userDataFile).subscribe(o=>{1==o.status&&l().fire("Ok",o.message,"success")})})()}guardarJerarquias(){l().fire({title:"Guardar orden de los roles",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(e=>{e.isConfirmed?this.projectHomeService.guardarJerarquias(this.dataSource).subscribe(o=>{1==o.status&&(this.cargarGrupos(),l().fire("Ok!","Organizacion Actualizada","success"))}):e.isDenied&&l().fire("Cambios no guardados","","info")})}cargarGrupos(){this.projectHomeService.getGroupsProject(this.project).subscribe(e=>{this.dataSource=e})}verUsuarios(e,o){this.userData.rol_id=Number(e),this.dialogService.open(Jt.Z,{height:"40rem",width:"50rem",data:this.userData})}verRoles(e,o){this.roleData.id=Number(e),this.roleData.nombre=o,this.groupService.getGroupsRoles(this.roleData.id).subscribe(n=>{this.roleData.roles=n,this.dialogService.open(Rt.a,{height:"30rem",width:"50rem",data:this.roleData})})}createGroup(){this.projectHomeService.getIdProject(this.project).subscribe(e=>{this.dialogService.open(G,{height:"22rem",width:"50rem",data:Number(e)}).afterClosed().subscribe(i=>{1===i&&this.cargarGrupos()})})}}function he(r,e){1&r&&(t.TgZ(0,"th",19),t._uU(1,"Departamento"),t.qZA())}function be(r,e){if(1&r&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.departamento)}}function Ce(r,e){1&r&&(t.TgZ(0,"th",19),t._uU(1,"Municipio"),t.qZA())}function ve(r,e){if(1&r&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.municipio)}}function Ze(r,e){1&r&&(t.TgZ(0,"th",19),t._uU(1,"UPM"),t.qZA())}function xe(r,e){if(1&r&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Oqu(o.upm)}}function Ue(r,e){1&r&&(t.TgZ(0,"th",19),t._uU(1,"Estado"),t.qZA())}function ye(r,e){if(1&r&&(t.TgZ(0,"button",23),t._uU(1),t.qZA()),2&r){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.estado," ")}}function Te(r,e){if(1&r&&(t.TgZ(0,"button",24),t._uU(1),t.qZA()),2&r){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.estado," ")}}function we(r,e){if(1&r&&(t.TgZ(0,"td",20),t.YNc(1,ye,2,1,"button",21),t.YNc(2,Te,2,1,"button",22),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.Q6J("ngIf","Cargado"==o.estado),t.xp6(1),t.Q6J("ngIf","Sustituido"==o.estado)}}function Ae(r,e){1&r&&(t.TgZ(0,"th",19),t._uU(1,"Acciones"),t.qZA())}function Pe(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.sustituirUpm(i.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"loop"),t.qZA()()}}function je(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(o);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.verDetalles(i.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"receipt"),t.qZA()()}}function Se(r,e){if(1&r&&(t.TgZ(0,"td",20)(1,"div"),t.YNc(2,Pe,3,0,"button",25),t.qZA(),t.TgZ(3,"div"),t.YNc(4,je,3,0,"button",26),t.qZA()()),2&r){const o=e.$implicit;t.xp6(2),t.Q6J("ngIf","Cargado"==o.estado),t.xp6(2),t.Q6J("ngIf","Sustituido"==o.estado)}}function Ne(r,e){1&r&&t._UZ(0,"tr",29)}function De(r,e){1&r&&t._UZ(0,"tr",30)}function Ee(r,e){if(1&r&&(t.TgZ(0,"tr",31)(1,"td",32),t._uU(2),t.qZA()()),2&r){t.oxw();const o=t.MAs(19);t.xp6(2),t.hij(' No hay resultados de "',o.value,'" ')}}F.\u0275fac=function(e){return new(e||F)(t.Y36(d),t.Y36(u.GroupService),t.Y36(O.uw))},F.\u0275cmp=t.Xpm({type:F,selectors:[["app-group-project"]],viewQuery:function(e,o){if(1&e&&t.Gf(It,7),2&e){let n;t.iGM(n=t.CRH())&&(o.table=n.first)}},decls:31,vars:6,consts:[[1,"mat-elevation-z8","table_div"],[1,"orden_label"],["mat-table","","cdkDropList","","cdkDropListData","datasource",1,"table",3,"dataSource","cdkDropListDisabled","cdkDropListDropped"],["table",""],["matColumnDef","id"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","jerarquia","sticky",""],["matColumnDef","descripcion"],["matColumnDef","options"],[4,"matHeaderRowDef"],["cdkDrag","",3,"cdkDragData",4,"matRowDef","matRowDefColumns"],[1,"header"],["mat-flat-button","","color","accent","style","margin-right: 8px",3,"click",4,"ngxPermissionsOnly"],["mat-flat-button","","color","accent",3,"click"],[1,"dragCursor",3,"mousedown"],["mat-icon-button","","matTooltip","Editar","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Desactivar","color","warn","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Ver usuarios","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Agregar usuario","color","primary",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Cargar archivo de usuarios","color","primary",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Ver politicas","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Editar","color","primary",1,"iconbutton",3,"click"],["aria-label","Edit"],["mat-icon-button","","matTooltip","Desactivar","color","warn",1,"iconbutton",3,"click"],["aria-label","Delete"],["mat-icon-button","","matTooltip","Ver usuarios","color","primary",1,"iconbutton",3,"click"],["mat-icon-button","","matTooltip","Agregar usuario","color","primary",3,"click"],["mat-icon-button","","matTooltip","Cargar archivo de usuarios","color","primary",3,"click"],["mat-icon-button","","matTooltip","Ver politicas","color","primary",1,"iconbutton",3,"click"],["cdkDrag","",3,"cdkDragData"],["mat-flat-button","","color","accent",2,"margin-right","8px",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"br")(2,"br"),t.TgZ(3,"mat-label",1)(4,"strong"),t._uU(5,"Ordene los grupos de mayor a menor"),t.qZA()(),t.TgZ(6,"table",2,3),t.NdJ("cdkDropListDropped",function(i){return o.drop(i)}),t.ynx(8,4),t.YNc(9,zt,2,0,"mat-header-cell",5),t.YNc(10,$t,2,1,"mat-cell",6),t.BQk(),t.ynx(11,7),t.YNc(12,Lt,2,0,"mat-header-cell",5),t.YNc(13,Xt,5,1,"mat-cell",6),t.BQk(),t.ynx(14,8),t.YNc(15,Kt,2,0,"mat-header-cell",5),t.YNc(16,Wt,2,1,"mat-cell",6),t.BQk(),t.ynx(17,9),t.YNc(18,Vt,2,0,"mat-header-cell",5),t.YNc(19,te,2,1,"mat-cell",6),t.BQk(),t.ynx(20,10),t.YNc(21,ee,2,0,"mat-header-cell",5),t.YNc(22,me,7,12,"mat-cell",6),t.BQk(),t.YNc(23,de,1,0,"mat-header-row",11),t.YNc(24,ge,1,1,"mat-row",12),t.qZA()(),t.TgZ(25,"div",13),t.YNc(26,_e,4,0,"button",14),t.TgZ(27,"button",15),t.NdJ("click",function(){return o.guardarJerarquias()}),t.TgZ(28,"mat-icon"),t._uU(29,"save"),t.qZA(),t._uU(30," Guardar Orden de Roles "),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("dataSource",o.dataSource)("cdkDropListDisabled",o.dragDisabled),t.xp6(17),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("ngxPermissionsOnly",t.DdM(5,fe)))},dependencies:[g.hX,T.lW,T.RK,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,E.Hw,$.gM,Q.gE,H.Wj,H.Zt],styles:[".table[_ngcontent-%COMP%]{width:100%;margin:0 0 3rem}.table_div[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;max-width:98%;margin:0 auto;display:flex}.full-width-input[_ngcontent-%COMP%]{width:100% auto;padding:1em}.example-section[_ngcontent-%COMP%]{margin:12px}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin:1.5rem;padding:0 .4rem;font-family:Roboto,Helvetica Neue,sans-serif}.orden_label[_ngcontent-%COMP%]{text-align:center;padding-left:2rem;color:red}.dragCursor[_ngcontent-%COMP%]{cursor:move}"]});const qe=function(){return[10,25,100]};class R{constructor(e,o,n,i){this.formBuilder=e,this.dialog=o,this.homeProjectService=n,this.projectService=i,this.displayedColumns=["departamento","municipio","upm","estado","options"],this.data=[],this.assignment={proyecto_id:0,upms:[]},this.upmDataSust={proyecto_id:0,upm_nuevo:"",upm_anterior:0,descripcion:"",usuario_id:0},this.dataSource=new a.by,this.buildForm()}buildForm(){this.formUpms=this.formBuilder.group({file:[""]})}ngOnInit(){this.homeProjectService.getIdProject(localStorage.getItem("project")||"").subscribe(e=>{this.idProject=e,this.cargarUpmsAsignadas()})}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}cargarUpmsAsignadas(){0!=this.idProject&&this.projectService.getUpms(this.idProject).subscribe(e=>{this.dataSource=new a.by(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}addUpm(){var e=this;return(0,h.Z)(function*(){const{value:o}=yield l().fire({title:"UPM",input:"text",inputPlaceholder:"AEE001122337A2",confirmButtonText:"Agregar UPM",showCancelButton:!0,inputLabel:"Ingrese la UPM"});o&&(e.assignment.proyecto_id=e.idProject,e.assignment.upms=[o],e.projectService.assignUpmToProject(e.assignment).subscribe(n=>{1==n.status&&(e.cargarUpmsAsignadas(),l().fire("Ok!",n.message,"success"))}))})()}sustituirUpm(e){var o=this;return(0,h.Z)(function*(){o.upmDataSust.proyecto_id=o.idProject,o.upmDataSust.upm_anterior=Number(e);const{value:n}=yield l().fire({title:"Sustituir upms",html:'<span>Ingrese el upm</span><input type="text" style="width:80%;"  placeholder="AEE123456789A1" id="upm" class="swal2-input"><br><span>Ingrese el motivo de sustitucion</span><textarea id="descripcion" style="width:80%;" placeholder="No se puede acceder al lugar" class="swal2-input"></textarea>',showCancelButton:!0,cancelButtonText:"Cancelar",preConfirm:()=>[document.getElementById("upm"),document.getElementById("descripcion")]});if(n){let s=n[1].value;o.upmDataSust.upm_nuevo=n[0].value,o.upmDataSust.descripcion=s,o.upmDataSust.usuario_id=Number(localStorage.getItem("id")),o.projectService.sustituirUpm(o.upmDataSust).subscribe(f=>{1==f.status&&(o.cargarUpmsAsignadas(),l().fire("Ok!",f.message,"success"))})}})()}addFile(){var e=this;return(0,h.Z)(function*(){const{value:o}=yield l().fire({title:"Seleccione archivo",input:"file",inputAttributes:{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}});if(o){const n=new FileReader;n.onload=i=>{const f=C.ij(i.target.result,{type:"binary"});e.data=C.P6.sheet_to_json(f.Sheets[f.SheetNames[0]],{header:1}),e.generateJson()},n.readAsBinaryString(o)}})()}generateJson(){this.idProject&&(this.assignment.proyecto_id=this.idProject,this.data.forEach(e=>{this.assignment.upms.push(e.toString())})),this.assignment.upms=this.assignment.upms.filter(Boolean),console.log(this.assignment),this.projectService.assignUpmToProject(this.assignment).subscribe(e=>{1==e.status&&(this.cargarUpmsAsignadas(),l().fire("Ok!",e.message,"success"))})}verDetalles(e){Number(e)&&this.homeProjectService.verDetalleSustitucion(Number(e)).subscribe(o=>{l().fire({title:"Descripcion",html:`UPM nuevo: <b>${o.nombre}</b>, <br><span>Usuario modificador: ${o.codigo_usuario}</span> <br><span>Fecha: ${o.fecha}</span> <br><p>Motivo: ${o.descripcion}</p>`})})}}function Oe(r,e){1&r&&(t.TgZ(0,"mat-tab",9),t._UZ(1,"app-group-project"),t.qZA())}function Me(r,e){1&r&&(t.TgZ(0,"mat-tab",10),t._UZ(1,"app-upms"),t.qZA())}R.\u0275fac=function(e){return new(e||R)(t.Y36(v.qu),t.Y36(O.uw),t.Y36(d),t.Y36(p.Y))},R.\u0275cmp=t.Xpm({type:R,selectors:[["app-upms"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Z.NW,5),t.Gf(_.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(o.paginator=n.first),t.iGM(n=t.CRH())&&(o.sort=n.first)}},decls:42,vars:5,consts:[[1,"container"],[1,"header"],["mat-flat-button","","color","accent",3,"click"],["matInput","","placeholder","Ejemplo: AEE010100005A1",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","departamento"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","municipio"],["matColumnDef","upm"],["matColumnDef","estado"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["paginator",""],["mat-header-cell",""],["mat-cell",""],["mat-stroked-button","","color","primary","class","estado",4,"ngIf"],["mat-stroked-button","","color","warn","class","estado",4,"ngIf"],["mat-stroked-button","","color","primary",1,"estado"],["mat-stroked-button","","color","warn",1,"estado"],["mat-icon-button","","matTooltip","Reemplazar","color","primary","class","iconbutton",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Ver detalles","color","primary","class","iconbutton",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Reemplazar","color","primary",1,"iconbutton",3,"click"],["mat-icon-button","","matTooltip","Ver detalles","color","primary",1,"iconbutton",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(t._UZ(0,"br")(1,"br"),t.TgZ(2,"div")(3,"div",0)(4,"div",1)(5,"button",2),t.NdJ("click",function(){return o.addUpm()}),t.TgZ(6,"mat-icon"),t._uU(7,"add"),t.qZA(),t._uU(8," A\xf1adir UPM "),t.qZA(),t.TgZ(9,"button",2),t.NdJ("click",function(){return o.addFile()}),t.TgZ(10,"mat-icon"),t._uU(11,"arrow_upward"),t.qZA(),t._uU(12," Cargar Archivo de UPM "),t.qZA()()()(),t._UZ(13,"br")(14,"br"),t.TgZ(15,"mat-form-field")(16,"mat-label"),t._uU(17,"Buscar"),t.qZA(),t.TgZ(18,"input",3,4),t.NdJ("keyup",function(i){return o.applyFilter(i)}),t.qZA()(),t.TgZ(20,"div",5)(21,"table",6),t.ynx(22,7),t.YNc(23,he,2,0,"th",8),t.YNc(24,be,2,1,"td",9),t.BQk(),t.ynx(25,10),t.YNc(26,Ce,2,0,"th",8),t.YNc(27,ve,2,1,"td",9),t.BQk(),t.ynx(28,11),t.YNc(29,Ze,2,0,"th",8),t.YNc(30,xe,2,1,"td",9),t.BQk(),t.ynx(31,12),t.YNc(32,Ue,2,0,"th",8),t.YNc(33,we,3,2,"td",9),t.BQk(),t.ynx(34,13),t.YNc(35,Ae,2,0,"th",8),t.YNc(36,Se,5,2,"td",9),t.BQk(),t.YNc(37,Ne,1,0,"tr",14),t.YNc(38,De,1,0,"tr",15),t.YNc(39,Ee,3,1,"tr",16),t.qZA(),t._UZ(40,"mat-paginator",17,18),t.qZA()),2&e&&(t.xp6(21),t.Q6J("dataSource",o.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(4,qe)))},dependencies:[y.O5,g.KE,g.hX,U.Nt,T.lW,T.RK,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,a.Ee,E.Hw,Z.NW,$.gM,_.YE],styles:[".table[_ngcontent-%COMP%]{width:100%;margin:0 0 3rem}.table_div[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;max-width:98%;margin:0 auto;display:flex}.full-width-input[_ngcontent-%COMP%]{width:100% auto;padding:1em}.example-section[_ngcontent-%COMP%]{margin:12px}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.header[_ngcontent-%COMP%]{display:flex;margin:.5rem;padding:0 .4rem;gap:1rem}.container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]});const ke=function(){return["crear-grupo"]},Ye=function(){return["ver-upms"]};class N{constructor(e,o){this.router=e,this.projectHomeService=o,this.projectId=0,this.roles=[]}ngOnInit(){this.project=localStorage.getItem("project")||"",this.project||this.router.navigateByUrl("home")}}N.\u0275fac=function(e){return new(e||N)(t.Y36(j.F0),t.Y36(d))},N.\u0275cmp=t.Xpm({type:N,selectors:[["app-home-project-page"]],decls:18,vars:5,consts:[[1,"grid-container"],[1,"frow-container"],[1,"col-sm-1-1","col-sm-6-12","col-md-6-12"],[1,"header"],["color","primary","mode","determinate","value","45"],[1,"mat-elevation-z8"],["color","accent"],["label","Roles",4,"ngxPermissionsOnly"],["label","UPM",4,"ngxPermissionsOnly"],["label","Roles"],["label","UPM"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),t._uU(5),t.qZA(),t.TgZ(6,"div")(7,"h3")(8,"mat-label"),t._uU(9,"Progreso Total"),t.qZA()(),t._UZ(10,"mat-progress-spinner",4),t.qZA()()(),t._UZ(11,"br")(12,"br")(13,"br"),t.TgZ(14,"div",5)(15,"mat-tab-group",6),t.YNc(16,Oe,2,0,"mat-tab",7),t.YNc(17,Me,2,0,"mat-tab",8),t.qZA()()()()),2&e&&(t.xp6(5),t.Oqu(o.project),t.xp6(11),t.Q6J("ngxPermissionsOnly",t.DdM(3,ke)),t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(4,Ye)))},dependencies:[g.hX,Gt.Ou,K.uX,K.SP,Q.gE,F,R],styles:[".header[_ngcontent-%COMP%]{padding-top:2rem;display:flex;justify-content:space-around;align-items:center}.progress-upms[_ngcontent-%COMP%]{padding-top:3.5rem;display:flex;justify-content:space-around;flex-wrap:wrap}.upm-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:12rem;width:14rem}.grid-example-square[_ngcontent-%COMP%]{justify-content:end}"]});const Ge=[{path:"",component:N},{path:"assignPersonal",component:q},{path:"assignUpmChief",component:k},{path:"supervisor",component:Y},{path:"cartografo",component:M}];class A{}A.\u0275fac=function(e){return new(e||A)},A.\u0275mod=t.oAB({type:A}),A.\u0275inj=t.cJS({imports:[j.Bz.forChild(Ge),j.Bz]});var Fe=c(4657);class D{}D.\u0275fac=function(e){return new(e||D)},D.\u0275mod=t.oAB({type:D}),D.\u0275inj=t.cJS({imports:[y.ez,A,Fe.M,v.UX,Q.VI,H._t]})},4327:function(I,J){var c,h;void 0!==(h="function"==typeof(c=function(){"use strict";function _(u,m,d){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){t(p.response,m,d)},p.onerror=function(){console.error("could not download file")},p.send()}function a(u){var m=new XMLHttpRequest;m.open("HEAD",u,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function S(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(m)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,C=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),t=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(u,m,d){var p=l.URL||l.webkitURL,b=document.createElement("a");b.download=m=m||u.name||"download",b.rel="noopener","string"==typeof u?(b.href=u,b.origin===location.origin?S(b):a(b.href)?_(u,m,d):S(b,b.target="_blank")):(b.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(b.href)},4e4),setTimeout(function(){S(b)},0))}:"msSaveOrOpenBlob"in navigator?function(u,m,d){if(m=m||u.name||"download","string"!=typeof u)navigator.msSaveOrOpenBlob(function Z(u,m){return typeof m>"u"?m={autoBom:!1}:"object"!=typeof m&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\ufeff",u],{type:u.type}):u}(u,d),m);else if(a(u))_(u,m,d);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){S(p)})}}:function(u,m,d,p){if((p=p||open("","_blank"))&&(p.document.title=p.document.body.innerText="downloading..."),"string"==typeof u)return _(u,m,d);var b="application/octet-stream"===u.type,z=/constructor/i.test(l.HTMLElement)||l.safari,B=/CriOS\/[\d]+/.test(navigator.userAgent);if((B||b&&z||C)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var U=x.result;U=B?U:U.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=U:location=U,p=null},x.readAsDataURL(u)}else{var y=l.URL||l.webkitURL,g=y.createObjectURL(u);p?p.location=g:location.href=g,p=null,setTimeout(function(){y.revokeObjectURL(g)},4e4)}});l.saveAs=t.saveAs=t,I.exports=t})?c.apply(J,[]):c)&&(I.exports=h)}}]);