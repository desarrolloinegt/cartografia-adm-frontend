"use strict";(self.webpackChunkcartografia_app=self.webpackChunkcartografia_app||[]).push([[246],{6246:(at,T,s)=>{s.r(T),s.d(T,{NewSurveyPagesComponent:()=>d,SurveyPagesComponent:()=>p,SurveyService:()=>u,SurveysModule:()=>g,SurveysRoutingModule:()=>m});var x=s(8739),S=s(6308),c=s(671),P=s(5226),f=s.n(P),a=s(4006),t=s(4650),E=s(8443);class u{constructor(e){this.apiService=e}getSurveys(){return this.apiService.getAll("encuestas")}desactiveSurvey(e){return this.apiService.desactive("encuesta",e)}create(e){return this.apiService.store("encuesta",e)}editSurvey(e){return this.apiService.patch("encuesta/edit",e)}}u.\u0275fac=function(e){return new(e||u)(t.LFG(E.s))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});var _=s(7274),C=s(6895),l=s(9549),Z=s(4144),h=s(4859),b=s(4954);function D(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Nombre de Encuesta es "),t.TgZ(2,"strong"),t._uU(3,"requerido"),t.qZA()())}function U(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Descripcion es "),t.TgZ(2,"strong"),t._uU(3,"requerida"),t.qZA()())}function A(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.createSurvey())}),t._uU(1," Guardar Encuesta "),t.qZA()}if(2&r){const o=t.oxw();t.Q6J("disabled",!o.surveyForm.valid)}}function F(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.cancelAdd())}),t._uU(1," Cancelar "),t.qZA()}}const N=function(){return["crear-encuesta"]};class d{constructor(e,o,i){this.surveyService=e,this.formBuilder=o,this.dialogRef=i,this.buildForm()}buildForm(){this.surveyForm=this.formBuilder.group({nombre:["",a.kI.required],descripcion:[""]})}get Nombre(){return this.surveyForm.get("nombre")}get Descripcion(){return this.surveyForm.get("descripcion")}submit(){}createSurvey(){this.surveyForm.valid&&this.surveyService.create(this.surveyForm.value).subscribe(e=>{1==e.status&&(f().fire("Ok!",e.message,"success"),this.dialogRef.close(1))},e=>{console.log(e)})}cancelAdd(){this.dialogRef.close()}}function k(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Nombre es "),t.TgZ(2,"strong"),t._uU(3,"requerido"),t.qZA()())}function q(r,e){1&r&&(t.TgZ(0,"mat-error"),t._uU(1,"Descripcion es "),t.TgZ(2,"strong"),t._uU(3,"requerido"),t.qZA()())}function J(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.editSurvey())}),t._uU(1," Editar Encuesta "),t.qZA()}if(2&r){const o=t.oxw();t.Q6J("disabled",!o.editForm.valid)}}d.\u0275fac=function(e){return new(e||d)(t.Y36(u),t.Y36(a.qu),t.Y36(_.so))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-new-survey-pages"]],decls:19,vars:11,consts:[[1,"card"],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","text","formControlName","nombre","matInput","","placeholder","ENEI","required","",1,"form-control"],[4,"ngIf"],["type","text","formControlName","descripcion","placeholder","Encuesta creada para proyecto ENEI a\xf1o 2024","matInput","",1,"form-control"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click",4,"ngxPermissionsOnly"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],["type","submit","mat-stroked-button","","color","warn",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("submit",function(){return o.submit()}),t.TgZ(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),t._uU(6,"Ingrese el Nombre de la Encuesta"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,D,4,0,"mat-error",6),t.qZA()(),t.TgZ(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),t._uU(12,"Descripcion"),t.qZA(),t._UZ(13,"input",7),t.YNc(14,U,4,0,"mat-error",6),t.qZA()(),t.TgZ(15,"div",3),t.YNc(16,A,2,1,"button",8),t._UZ(17,"br"),t.YNc(18,F,2,0,"button",9),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",o.surveyForm),t.xp6(3),t.Udp("font-size",16,"px"),t.xp6(3),t.Q6J("ngIf",(null==o.Nombre?null:o.Nombre.touched)&&(null==o.Nombre?null:o.Nombre.hasError("required"))),t.xp6(3),t.Udp("font-size",16,"px"),t.xp6(3),t.Q6J("ngIf",(null==o.Descripcion?null:o.Descripcion.touched)&&(null==o.Descripcion?null:o.Descripcion.hasError("required"))),t.xp6(2),t.Q6J("ngxPermissionsOnly",t.DdM(9,N)),t.xp6(2),t.Q6J("ngxPermissionsOnly",t.DdM(10,N)))},dependencies:[C.O5,l.KE,l.hX,l.TO,Z.Nt,h.lW,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,b.gE],styles:[".full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;max-width:95%;margin:0 auto;display:flex}.example-section[_ngcontent-%COMP%]{max-width:95%;margin:0 auto;display:flex}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.card[_ngcontent-%COMP%]{padding:2rem}"]});const Y=function(){return["editar-encuesta"]};class v{constructor(e,o,i,n){this.surveyService=e,this.dialogRef=o,this.data=i,this.formBuilder=n,this.buildForm()}submit(){}buildForm(){this.editForm=this.formBuilder.group({id:[this.data.id,[a.kI.required]],nombre:[this.data.nombre,[a.kI.required]],descripcion:[this.data.descripcion,[a.kI.required]]})}get Id(){return this.editForm.get("id")}get Nombre(){return this.editForm.get("nombre")}get Descripcion(){return this.editForm.get("descripcion")}editSurvey(){this.editForm.valid&&this.surveyService.editSurvey(this.editForm.value).subscribe(e=>{1==e.status&&(f().fire("Ok!",e.message,"success"),this.dialogRef.close(1))},e=>{console.log(e)})}cancelEdit(){this.dialogRef.close()}}v.\u0275fac=function(e){return new(e||v)(t.Y36(u),t.Y36(_.so),t.Y36(_.WI),t.Y36(a.qu))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-survey-edit-dialog"]],decls:23,vars:6,consts:[[1,"card"],["mat-dialog-title",""],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","text","formControlName","nombre","matInput","","placeholder","admin","required","",1,"form-control"],[4,"ngIf"],["type","text","formControlName","descripcion","matInput","","placeholder","admin","required","",1,"form-control"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.qZA(),t._UZ(3,"br")(4,"br"),t.TgZ(5,"div",2)(6,"form",3),t.NdJ("submit",function(){return o.submit()}),t.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),t._uU(10,"Nombre de la Encuesta "),t.qZA(),t._UZ(11,"input",6),t.YNc(12,k,4,0,"mat-error",7),t.qZA()(),t.TgZ(13,"div",4)(14,"mat-form-field",5)(15,"mat-label"),t._uU(16,"Descripcion"),t.qZA(),t._UZ(17,"input",8),t.YNc(18,q,4,0,"mat-error",7),t.qZA()(),t.TgZ(19,"div",4),t.YNc(20,J,2,1,"button",9),t.TgZ(21,"button",10),t.NdJ("click",function(){return o.cancelEdit()}),t._uU(22," Cancelar "),t.qZA()()()()()),2&e&&(t.xp6(2),t.hij("Encuesta: ",o.data.nombre,""),t.xp6(4),t.Q6J("formGroup",o.editForm),t.xp6(6),t.Q6J("ngIf",(null==o.Nombre?null:o.Nombre.touched)&&(null==o.Nombre?null:o.Nombre.hasError("required"))),t.xp6(6),t.Q6J("ngIf",(null==o.Descripcion?null:o.Descripcion.touched)&&(null==o.Descripcion?null:o.Descripcion.hasError("required"))),t.xp6(2),t.Q6J("ngxPermissionsOnly",t.DdM(5,Y)))},dependencies:[C.O5,l.KE,l.hX,l.TO,Z.Nt,h.lW,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,b.gE],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.full-width-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:50%}.card[_ngcontent-%COMP%]{padding:2rem}"]});var M=s(7392),O=s(266);function Q(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.open())}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA(),t._uU(3," Crear Encuesta "),t.qZA()}}function I(r,e){1&r&&(t.TgZ(0,"th",25),t._uU(1,"ID"),t.qZA())}function R(r,e){if(1&r&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.hij(" ",o.id," ")}}function B(r,e){1&r&&(t.TgZ(0,"th",25),t._uU(1," Nombre "),t.qZA())}function G(r,e){if(1&r&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.hij(" ",o.nombre," ")}}function z(r,e){1&r&&(t.TgZ(0,"th",25),t._uU(1,"Descripcion"),t.qZA())}function H(r,e){if(1&r&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&r){const o=e.$implicit;t.xp6(1),t.hij(" ",o.descripcion," ")}}function j(r,e){1&r&&t._UZ(0,"th",27)}function K(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,y=t.oxw();return t.KtG(y.editar(n.id,n.nombre,n.descripcion))}),t.TgZ(1,"mat-icon",31),t._uU(2,"edit"),t.qZA()()}}function X(r,e){if(1&r){const o=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,y=t.oxw();return t.KtG(y.desactivar(n.id,n.nombre))}),t.TgZ(1,"mat-icon",33),t._uU(2,"delete"),t.qZA()()}}const W=function(){return["editar-encuesta"]},L=function(){return["desactivar-encuesta"]};function $(r,e){1&r&&(t.TgZ(0,"td",26),t.YNc(1,K,3,0,"button",28),t.YNc(2,X,3,0,"button",29),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(2,W)),t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(3,L)))}function V(r,e){1&r&&t._UZ(0,"tr",34)}function tt(r,e){1&r&&t._UZ(0,"tr",35)}function et(r,e){if(1&r&&(t.TgZ(0,"tr",36)(1,"td",37),t._uU(2),t.qZA()()),2&r){t.oxw();const o=t.MAs(11);t.xp6(2),t.hij('No hay resultados de "',o.value,'"')}}const ot=function(){return["crear-encuesta"]},rt=function(){return[5,10,25,100]};class p{constructor(e,o){this.surveyService=e,this.dialogService=o,this.displayedColumns=["id","nombre","descripcion","options"],this.surveyData={id:0,nombre:"",descripcion:""},this.dataSource=new c.by}applyFilter(e){this.filterValue=e.target.value,this.dataSource.filter=this.filterValue.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}open(){this.dialogService.open(d,{height:"20rem",width:"50rem"}).afterClosed().subscribe(o=>{1==o&&this.cargarEncuestas()})}editar(e,o,i){this.surveyData.nombre=o,this.surveyData.descripcion=i,this.surveyData.id=Number(e),this.dialogService.open(v,{height:"20rem",width:"50rem",data:this.surveyData}).afterClosed().subscribe(y=>{1===y&&this.cargarEncuestas()})}ngOnInit(){this.cargarEncuestas()}cargarEncuestas(){this.surveyService.getSurveys().subscribe(e=>{this.dataSource=new c.by(e)})}desactivar(e,o){f().fire({title:"\xbfEsta seguro que desea Desactivar la encuesta: "+o+"?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(i=>{i.isConfirmed?this.surveyService.desactiveSurvey(Number(e)).subscribe(n=>{1==n.status&&(this.cargarEncuestas(),f().fire("Ok!",n.message,"success"))},n=>{console.log(n)}):i.isDenied&&f().fire("Cambios no guardados","","info")})}}p.\u0275fac=function(e){return new(e||p)(t.Y36(u),t.Y36(_.uw))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-survey-pages"]],viewQuery:function(e,o){if(1&e&&(t.Gf(x.NW,5),t.Gf(S.YE,7)),2&e){let i;t.iGM(i=t.CRH())&&(o.paginator=i.first),t.iGM(i=t.CRH())&&(o.sort=i.first)}},decls:35,vars:11,consts:[[1,"grid-container"],[1,"frow-container"],[1,"frow","row-start"],[1,"col-sm-1-1","col-sm-6-12","col-md-6-12"],[1,"col-sm-1-1","col-sm-3-12","col-md-3-12"],["appearence","outline",1,"fluid"],["matInput","","placeholder","Ejemplo: ENEI",3,"keyup"],["input",""],["matSuffix",""],[1,"col-sm-1-1","col-sm-3-12","col-md-3-12",2,"text-align","right"],["mat-flat-button","","color","accent","style","margin-right: 8px;",3,"click",4,"ngxPermissionsOnly"],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"fluid",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cell-pointer","mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["matColumnDef","options"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","selected-row","mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-flat-button","","color","accent",2,"margin-right","8px",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"cell-pointer"],["mat-header-cell",""],["mat-icon-button","","matTooltip","Click para Editar","matTooltipPosition","right","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Click para desactivar","color","warn","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Click para Editar","matTooltipPosition","right","color","primary",1,"iconbutton",3,"click"],["aria-label","Edit"],["mat-icon-button","","matTooltip","Click para desactivar","color","warn",1,"iconbutton",3,"click"],["aria-label","Delete"],["mat-header-row",""],["mat-row","",1,"selected-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),t._uU(5,"Encuestas"),t.qZA()(),t.TgZ(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Buscar"),t.qZA(),t.TgZ(10,"input",6,7),t.NdJ("keyup",function(n){return o.applyFilter(n)}),t.qZA(),t.TgZ(12,"mat-icon",8),t._uU(13,"search"),t.qZA()()(),t.TgZ(14,"div",9),t.YNc(15,Q,4,0,"button",10),t.qZA()(),t.TgZ(16,"div",11)(17,"table",12),t.ynx(18,13),t.YNc(19,I,2,0,"th",14),t.YNc(20,R,2,1,"td",15),t.BQk(),t.ynx(21,16),t.YNc(22,B,2,0,"th",14),t.YNc(23,G,2,1,"td",15),t.BQk(),t.ynx(24,17),t.YNc(25,z,2,0,"th",14),t.YNc(26,H,2,1,"td",15),t.BQk(),t.ynx(27,18),t.YNc(28,j,1,0,"th",19),t.YNc(29,$,3,4,"td",15),t.BQk(),t.YNc(30,V,1,0,"tr",20),t.YNc(31,tt,1,0,"tr",21),t.YNc(32,et,3,1,"tr",22),t.qZA(),t._UZ(33,"br")(34,"mat-paginator",23),t.qZA()()()),2&e&&(t.xp6(7),t.Udp("font-size",12,"px"),t.xp6(1),t.Udp("font-size",14,"px"),t.xp6(7),t.Q6J("ngxPermissionsOnly",t.DdM(9,ot)),t.xp6(2),t.Q6J("dataSource",o.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(3),t.Q6J("pageSizeOptions",t.DdM(10,rt)))},dependencies:[l.KE,l.hX,l.R9,Z.Nt,h.lW,h.RK,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,M.Hw,x.NW,O.gM,S.YE,S.nU,b.gE]});var w=s(9132);const nt=[{path:"",component:p}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[w.Bz.forChild(nt),w.Bz]});var it=s(4657);class g{}g.\u0275fac=function(e){return new(e||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[C.ez,m,it.M,a.UX,b.VI.forChild()]})}}]);