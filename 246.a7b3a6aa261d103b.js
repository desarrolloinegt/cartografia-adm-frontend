"use strict";(self.webpackChunkcartografia_app=self.webpackChunkcartografia_app||[]).push([[246],{6246:(oe,T,i)=>{i.r(T),i.d(T,{NewSurveyPagesComponent:()=>p,SurveyPagesComponent:()=>d,SurveyService:()=>c,SurveysModule:()=>g,SurveysRoutingModule:()=>m});var N=i(8739),x=i(6308),u=i(7155),P=i(5226),f=i.n(P),n=i(4006),b=i(7274),e=i(4650),w=i(6570);class c{constructor(t){this.apiService=t}getSurveys(){return this.apiService.getAll("encuestas")}desactiveSurvey(t){return this.apiService.desactive("encuesta",t)}create(t){return this.apiService.store("encuesta",t)}editSurvey(t){return this.apiService.patch("encuesta/edit",t)}}c.\u0275fac=function(t){return new(t||c)(e.LFG(w.s))},c.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});var C=i(6895),l=i(9549),S=i(4144),h=i(4859),_=i(4954);function D(r,t){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombre es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function E(r,t){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Descripcion es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function U(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.editSurvey())}),e._uU(1," Editar Encuesta "),e.qZA()}if(2&r){const o=e.oxw();e.Q6J("disabled",!o.editForm.valid)}}const A=function(){return["editar-encuesta"]};class v{constructor(t,o,a,s){this.surveyService=t,this.dialogRef=o,this.data=a,this.formBuilder=s,this.buildForm()}submit(){}buildForm(){this.editForm=this.formBuilder.group({id:[this.data.id,[n.kI.required]],nombre:[this.data.nombre,[n.kI.required]],descripcion:[this.data.descripcion,[n.kI.required]]})}get Id(){return this.editForm.get("id")}get Nombre(){return this.editForm.get("nombre")}get Descripcion(){return this.editForm.get("descripcion")}editSurvey(){this.editForm.valid&&this.surveyService.editSurvey(this.editForm.value).subscribe(t=>{1==t.status&&(f().fire("Ok!",t.message,"success"),this.dialogRef.close(1))},t=>{console.log(t)})}cancelEdit(){this.dialogRef.close()}}v.\u0275fac=function(t){return new(t||v)(e.Y36(c),e.Y36(b.so),e.Y36(b.WI),e.Y36(n.qu))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-survey-edit-dialog"]],decls:23,vars:6,consts:[[1,"card"],["mat-dialog-title",""],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","text","formControlName","nombre","matInput","","placeholder","admin","required","",1,"form-control"],[4,"ngIf"],["type","text","formControlName","descripcion","matInput","","placeholder","admin","required","",1,"form-control"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e._UZ(3,"br")(4,"br"),e.TgZ(5,"div",2)(6,"form",3),e.NdJ("submit",function(){return o.submit()}),e.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Nombre de la Encuesta "),e.qZA(),e._UZ(11,"input",6),e.YNc(12,D,4,0,"mat-error",7),e.qZA()(),e.TgZ(13,"div",4)(14,"mat-form-field",5)(15,"mat-label"),e._uU(16,"Descripcion"),e.qZA(),e._UZ(17,"input",8),e.YNc(18,E,4,0,"mat-error",7),e.qZA()(),e.TgZ(19,"div",4),e.YNc(20,U,2,1,"button",9),e.TgZ(21,"button",10),e.NdJ("click",function(){return o.cancelEdit()}),e._uU(22," Cancelar "),e.qZA()()()()()),2&t&&(e.xp6(2),e.hij("Encuesta: ",o.data.nombre,""),e.xp6(4),e.Q6J("formGroup",o.editForm),e.xp6(6),e.Q6J("ngIf",(null==o.Nombre?null:o.Nombre.touched)&&(null==o.Nombre?null:o.Nombre.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==o.Descripcion?null:o.Descripcion.touched)&&(null==o.Descripcion?null:o.Descripcion.hasError("required"))),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(5,A)))},dependencies:[C.O5,l.KE,l.hX,l.TO,S.Nt,h.lW,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,_.gE],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.full-width-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:50%}.card[_ngcontent-%COMP%]{padding:2rem}"]});var Z=i(9132),O=i(7392);function q(r,t){1&r&&(e.TgZ(0,"th",17),e._uU(1,"ID"),e.qZA())}function M(r,t){if(1&r&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&r){const o=t.$implicit;e.xp6(1),e.hij(" ",o.id," ")}}function F(r,t){1&r&&(e.TgZ(0,"th",17),e._uU(1," Nombre "),e.qZA())}function J(r,t){if(1&r&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&r){const o=t.$implicit;e.xp6(1),e.hij(" ",o.nombre," ")}}function Y(r,t){1&r&&(e.TgZ(0,"th",17),e._uU(1,"Descripcion"),e.qZA())}function k(r,t){if(1&r&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&r){const o=t.$implicit;e.xp6(1),e.hij(" ",o.descripcion," ")}}function I(r,t){1&r&&(e.TgZ(0,"th",17),e._uU(1,"Acciones"),e.qZA())}function Q(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(o);const s=e.oxw().$implicit,y=e.oxw();return e.KtG(y.editar(s.id,s.nombre,s.descripcion))}),e.TgZ(1,"mat-icon",22),e._uU(2,"edit"),e.qZA()()}}function B(r,t){if(1&r){const o=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(o);const s=e.oxw().$implicit,y=e.oxw();return e.KtG(y.desactivar(s.id,s.nombre))}),e.TgZ(1,"mat-icon",24),e._uU(2,"delete"),e.qZA()()}}const R=function(){return["editar-encuesta"]},G=function(){return["desactivar-encuesta"]};function j(r,t){1&r&&(e.TgZ(0,"td",18),e.YNc(1,Q,3,0,"button",19),e.YNc(2,B,3,0,"button",20),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(2,R)),e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(3,G)))}function z(r,t){1&r&&e._UZ(0,"tr",25)}function H(r,t){1&r&&e._UZ(0,"tr",26)}function X(r,t){if(1&r&&(e.TgZ(0,"tr",27)(1,"td",28),e._uU(2),e.qZA()()),2&r){e.oxw();const o=e.MAs(10);e.xp6(2),e.hij('No hay resultados de "',o.value,'"')}}const K=function(){return[5,10,25,100]};class d{constructor(t,o){this.surveyService=t,this.dialogService=o,this.displayedColumns=["id","nombre","descripcion","options"],this.surveyData={id:0,nombre:"",descripcion:""},this.dataSource=new u.by}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}editar(t,o,a){this.surveyData.nombre=o,this.surveyData.descripcion=a,this.surveyData.id=Number(t),this.dialogService.open(v,{height:"30rem",width:"50rem",data:this.surveyData}).afterClosed().subscribe(y=>{1===y&&this.cargarEncuestas()})}ngOnInit(){this.cargarEncuestas()}cargarEncuestas(){this.surveyService.getSurveys().subscribe(t=>{this.dataSource=new u.by(t)})}desactivar(t,o){f().fire({title:"\xbfEsta seguro que desea Desactivar el Proyecto: "+o+"?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(a=>{a.isConfirmed?this.surveyService.desactiveSurvey(Number(t)).subscribe(s=>{1==s.status&&(this.cargarEncuestas(),f().fire("Ok!",s.message,"success"))},s=>{console.log(s)}):a.isDenied&&f().fire("Cambios no guardados","","info")})}}function L(r,t){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombre de Encuesta es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function W(r,t){1&r&&(e.TgZ(0,"mat-error"),e._uU(1,"Descripcion es "),e.TgZ(2,"strong"),e._uU(3,"requerida"),e.qZA()())}function $(r,t){if(1&r&&(e.TgZ(0,"button",9),e._uU(1," Guardar Encuesta "),e.qZA()),2&r){const o=e.oxw();e.Q6J("disabled",!o.surveyForm.valid)}}d.\u0275fac=function(t){return new(t||d)(e.Y36(c),e.Y36(b.uw))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-survey-pages"]],viewQuery:function(t,o){if(1&t&&(e.Gf(N.NW,5),e.Gf(x.YE,5)),2&t){let a;e.iGM(a=e.CRH())&&(o.paginator=a.first),e.iGM(a=e.CRH())&&(o.sort=a.first)}},decls:29,vars:5,consts:[[1,"header"],["mat-fab","","color","accent","routerLink","create"],["aria-label","add","oncli",""],["matInput","","placeholder","Ej. ENEI",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","matTooltip","Click para Editar","matTooltipPosition","right","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Click para desactivar","color","warn","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Click para Editar","matTooltipPosition","right","color","primary",1,"iconbutton",3,"click"],["aria-label","Edit"],["mat-icon-button","","matTooltip","Click para desactivar","color","warn",1,"iconbutton",3,"click"],["aria-label","Delete"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Encuestas"),e.qZA(),e.TgZ(3,"a",1)(4,"mat-icon",2),e._uU(5,"add"),e.qZA()()(),e.TgZ(6,"mat-form-field")(7,"mat-label"),e._uU(8,"Buscar"),e.qZA(),e.TgZ(9,"input",3,4),e.NdJ("keyup",function(s){return o.applyFilter(s)}),e.qZA()(),e.TgZ(11,"div",5)(12,"table",6),e.ynx(13,7),e.YNc(14,q,2,0,"th",8),e.YNc(15,M,2,1,"td",9),e.BQk(),e.ynx(16,10),e.YNc(17,F,2,0,"th",8),e.YNc(18,J,2,1,"td",9),e.BQk(),e.ynx(19,11),e.YNc(20,Y,2,0,"th",8),e.YNc(21,k,2,1,"td",9),e.BQk(),e.ynx(22,12),e.YNc(23,I,2,0,"th",8),e.YNc(24,j,3,4,"td",9),e.BQk(),e.YNc(25,z,1,0,"tr",13),e.YNc(26,H,1,0,"tr",14),e.YNc(27,X,3,1,"tr",15),e.qZA(),e._UZ(28,"mat-paginator",16),e.qZA()),2&t&&(e.xp6(12),e.Q6J("dataSource",o.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(4,K)))},dependencies:[Z.rH,l.KE,l.hX,S.Nt,h.RK,h.EX,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,u.Ee,O.Hw,N.NW,_.gE],styles:["table[_ngcontent-%COMP%]{width:100%;padding:1em}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;max-width:98%;margin:0 auto;display:flex}.full-width-input[_ngcontent-%COMP%]{width:100% auto;padding:1em}.example-section[_ngcontent-%COMP%]{margin:12px}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1.5rem;padding:0 .4rem;font-family:Roboto,Helvetica Neue,sans-serif}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline;padding-top:.6rem;font-weight:400}"]});const V=function(){return["crear-encuesta"]};class p{constructor(t,o){this.surveyService=t,this.formBuilder=o,this.buildForm()}buildForm(){this.surveyForm=this.formBuilder.group({nombre:["",n.kI.required],descripcion:["",[n.kI.required]]})}get Nombre(){return this.surveyForm.get("nombre")}get Descripcion(){return this.surveyForm.get("descripcion")}createSurvey(){this.surveyForm.valid&&this.surveyService.create(this.surveyForm.value).subscribe(t=>{1==t.status&&f().fire("Ok!",t.message,"success")},t=>{console.log(t)})}}p.\u0275fac=function(t){return new(t||p)(e.Y36(c),e.Y36(n.qu))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-new-survey-pages"]],decls:20,vars:9,consts:[[1,"card"],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","text","formControlName","nombre","matInput","","placeholder","ENEI","required","",1,"form-control"],[4,"ngIf"],["type","text","formControlName","descripcion","placeholder","Encuesta creada para proyecto ENEI a\xf1o 2024","matInput","","required","",1,"form-control"],["type","submit","mat-raised-button","","color","primary",3,"disabled",4,"ngxPermissionsOnly"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,o){1&t&&(e._UZ(0,"br")(1,"br")(2,"br"),e.TgZ(3,"div",0)(4,"div",1)(5,"form",2),e.NdJ("submit",function(){return o.createSurvey()}),e.TgZ(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),e._uU(9,"Ingrese el Nombre de la Encuesta"),e.qZA(),e._UZ(10,"input",5),e.YNc(11,L,4,0,"mat-error",6),e.qZA()(),e.TgZ(12,"div",3)(13,"mat-form-field",4)(14,"mat-label"),e._uU(15,"Descripcion"),e.qZA(),e._UZ(16,"input",7),e.YNc(17,W,4,0,"mat-error",6),e.qZA()(),e.TgZ(18,"div",3),e.YNc(19,$,2,1,"button",8),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("formGroup",o.surveyForm),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==o.Nombre?null:o.Nombre.touched)&&(null==o.Nombre?null:o.Nombre.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==o.Descripcion?null:o.Descripcion.touched)&&(null==o.Descripcion?null:o.Descripcion.hasError("required"))),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(8,V)))},dependencies:[C.O5,l.KE,l.hX,l.TO,S.Nt,h.lW,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,_.gE],styles:[".full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;max-width:95%;margin:0 auto;display:flex}.example-section[_ngcontent-%COMP%]{margin:12px}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}"]});const ee=[{path:"",component:d},{path:"create",component:p}];class m{}m.\u0275fac=function(t){return new(t||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({imports:[Z.Bz.forChild(ee),Z.Bz]});var te=i(4657);class g{}g.\u0275fac=function(t){return new(t||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[C.ez,m,te.M,n.UX,_.VI.forChild()]})}}]);