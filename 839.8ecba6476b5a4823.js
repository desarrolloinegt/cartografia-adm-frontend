"use strict";(self.webpackChunkcartografia_app=self.webpackChunkcartografia_app||[]).push([[839],{3031:(x,b,r)=>{r.d(b,{a:()=>l});class l{static getHierarchys(){return[1,2,3,4,5,6,7]}}},4839:(x,b,r)=>{r.r(b),r.d(b,{GroupPagesComponent:()=>F,GroupService:()=>Z.l,GroupsModule:()=>B,GroupsRoutingModule:()=>N});var l=r(9132),v=r(8739),p=r(6308),d=r(7155),o=r(6525),e=r(3995),A=r(5226),y=r.n(A),G=r(7559),h=r(4006),O=r(3031),t=r(4650),Z=r(4476),R=r(8049),M=r(7274),P=r(6895),_=r(9549),u=r(4144),a=r(4859),T=r(4385),D=r(3238),C=r(4954);function E(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Nombre de rol es "),t.TgZ(2,"strong"),t._uU(3,"requerido"),t.qZA()())}function f(n,i){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){const s=i.$implicit;t.Q6J("value",s.id),t.xp6(1),t.Oqu(s.nombre)}}function m(n,i){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Proyecto es "),t.TgZ(2,"strong"),t._uU(3,"requerida"),t.qZA()())}function I(n,i){if(1&n){const s=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.createGroup())}),t._uU(1," Guardar Rol "),t.qZA()}if(2&n){const s=t.oxw();t.Q6J("disabled",!s.groupForm.valid)}}function J(n,i){if(1&n){const s=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.cancelAdd())}),t._uU(1," Cancelar "),t.qZA()}}const Y=function(){return["crear-grupo"]};class S{constructor(i,s,g,c){this.groupService=i,this.projectService=s,this.formBuilder=g,this.dialogRef=c,this.projects=[],this.jerarquias=O.a.getHierarchys(),this.buildForm(),this.getProjects()}buildForm(){this.groupForm=this.formBuilder.group({nombre:["",h.kI.required],descripcion:[""],proyecto_id:["",[h.kI.required]]})}get Nombre(){return this.groupForm.get("nombre")}get Descripcion(){return this.groupForm.get("descripcion")}get ProyectoId(){return this.groupForm.get("proyecto_id")}get Jerarquia(){return this.groupForm.get("jerarquia")}getProjects(){this.projectService.getProjectView().subscribe(i=>{this.projects=i})}submit(){}createGroup(){this.groupForm.valid&&this.groupService.create(this.groupForm.value).subscribe(i=>{1==i.status&&(y().fire("Ok!",i.message,"success"),this.dialogRef.close(1))},i=>{console.log(i)})}cancelAdd(){this.dialogRef.close()}}S.\u0275fac=function(i){return new(i||S)(t.Y36(Z.l),t.Y36(R.Y),t.Y36(h.qu),t.Y36(M.so))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-new-group-pages"]],decls:25,vars:14,consts:[[1,"card"],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","text","formControlName","nombre","matInput","","placeholder","Supervisores ENEI","required","",1,"form-control"],[4,"ngIf"],["type","text","formControlName","descripcion","placeholder","Proyecto 2026","matInput","",1,"form-control"],["formControlName","proyecto_id"],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click",4,"ngxPermissionsOnly"],[3,"value"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],["type","submit","mat-stroked-button","","color","warn",3,"click"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("submit",function(){return s.submit()}),t.TgZ(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),t._uU(6,"Ingrese el Nombre del Rol"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,E,4,0,"mat-error",6),t.qZA()(),t.TgZ(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),t._uU(12,"Descripcion"),t.qZA(),t._UZ(13,"input",7),t.qZA()(),t.TgZ(14,"div",3)(15,"mat-form-field",4)(16,"mat-label"),t._uU(17,"Seleccione un proyecto"),t.qZA(),t.TgZ(18,"mat-select",8),t.YNc(19,f,2,2,"mat-option",9),t.qZA(),t.YNc(20,m,4,0,"mat-error",6),t.qZA()(),t.TgZ(21,"div",3),t.YNc(22,I,2,1,"button",10),t._UZ(23,"br"),t.YNc(24,J,2,0,"button",11),t.qZA()()()()),2&i&&(t.xp6(2),t.Q6J("formGroup",s.groupForm),t.xp6(3),t.Udp("font-size",16,"px"),t.xp6(3),t.Q6J("ngIf",(null==s.Nombre?null:s.Nombre.touched)&&(null==s.Nombre?null:s.Nombre.hasError("required"))),t.xp6(3),t.Udp("font-size",16,"px"),t.xp6(5),t.Udp("font-size",16,"px"),t.xp6(3),t.Q6J("ngForOf",s.projects),t.xp6(1),t.Q6J("ngIf",(null==s.ProyectoId?null:s.ProyectoId.touched)&&(null==s.ProyectoId?null:s.ProyectoId.hasError("required"))),t.xp6(2),t.Q6J("ngxPermissionsOnly",t.DdM(12,Y)),t.xp6(2),t.Q6J("ngxPermissionsOnly",t.DdM(13,Y)))},dependencies:[P.sg,P.O5,_.KE,_.hX,_.TO,u.Nt,a.lW,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.sg,h.u,T.gD,D.ey,C.gE],styles:[".full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;max-width:98%;margin:0 auto;display:flex}.example-section[_ngcontent-%COMP%]{max-width:98%;margin:0 auto;display:flex}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.card[_ngcontent-%COMP%]{padding:3rem}"]});var w=r(7392),K=r(266);function j(n,i){if(1&n){const s=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.open())}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA()()}}function L(n,i){1&n&&(t.TgZ(0,"th",19),t._uU(1,"ID"),t.qZA())}function W(n,i){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const s=i.$implicit;t.xp6(1),t.Oqu(s.id)}}function Q(n,i){1&n&&(t.TgZ(0,"th",19),t._uU(1,"Nombre"),t.qZA())}function q(n,i){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const s=i.$implicit;t.xp6(1),t.Oqu(s.nombre)}}function k(n,i){1&n&&(t.TgZ(0,"th",19),t._uU(1,"Descripcion"),t.qZA())}function z(n,i){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const s=i.$implicit;t.xp6(1),t.Oqu(s.descripcion)}}function H(n,i){1&n&&(t.TgZ(0,"th",19),t._uU(1,"Jerarquia"),t.qZA())}function $(n,i){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const s=i.$implicit;t.xp6(1),t.Oqu(s.jerarquia)}}function X(n,i){1&n&&(t.TgZ(0,"th",19),t._uU(1,"Proyecto"),t.qZA())}function V(n,i){if(1&n&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&n){const s=i.$implicit;t.xp6(1),t.Oqu(s.proyecto)}}function tt(n,i){1&n&&(t.TgZ(0,"th",19),t._uU(1,"Acciones"),t.qZA())}function ot(n,i){if(1&n){const s=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){t.CHM(s);const c=t.oxw().$implicit,U=t.oxw();return t.KtG(U.editar(c.id,c.nombre,c.descripcion,c.jerarquia,c.proyecto_id))}),t.TgZ(1,"mat-icon",26),t._uU(2,"edit"),t.qZA()()}}function et(n,i){if(1&n){const s=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(s);const c=t.oxw().$implicit,U=t.oxw();return t.KtG(U.desactivar(c.id,c.nombre))}),t.TgZ(1,"mat-icon",28),t._uU(2,"delete"),t.qZA()()}}function rt(n,i){if(1&n){const s=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(s);const c=t.oxw().$implicit,U=t.oxw();return t.KtG(U.verUsuarios(c.id,c.nombre))}),t.TgZ(1,"mat-icon"),t._uU(2,"supervised_user_circle"),t.qZA()()}}function it(n,i){if(1&n){const s=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(s);const c=t.oxw().$implicit,U=t.oxw();return t.KtG(U.verRoles(c.id,c.nombre))}),t.TgZ(1,"mat-icon"),t._uU(2,"list_alt"),t.qZA()()}}const nt=function(){return["editar-grupo"]},st=function(){return["desactivar-grupo"]},at=function(){return["asignar-usuario-grupo"]},ut=function(){return["asignar-rol-grupo"]};function lt(n,i){1&n&&(t.TgZ(0,"td",20),t.YNc(1,ot,3,0,"button",21),t.YNc(2,et,3,0,"button",22),t.YNc(3,rt,3,0,"button",23),t.YNc(4,it,3,0,"button",24),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(4,nt)),t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(5,st)),t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(6,at)),t.xp6(1),t.Q6J("ngxPermissionsOnly",t.DdM(7,ut)))}function ct(n,i){1&n&&t._UZ(0,"tr",31)}function pt(n,i){1&n&&t._UZ(0,"tr",32)}function mt(n,i){if(1&n&&(t.TgZ(0,"tr",33)(1,"td",34),t._uU(2),t.qZA()()),2&n){t.oxw();const s=t.MAs(8);t.xp6(2),t.hij(' No hay resultados de "',s.value,'" ')}}const dt=function(){return["crear-grupo"]},_t=function(){return[5,10,25,100]};class F{constructor(i,s){this.groupService=i,this.dialogService=s,this.displayedColumns=["id","nombre","descripcion","proyecto","options"],this.groupData={id:0,nombre:"",descripcion:"",jerarquia:0,proyecto:"",proyecto_id:0},this.userData={id:0,nombre:"",usuarios:[]},this.roleData={id:0,nombre:"",roles:[]},this.dataSource=new d.by}applyFilter(i){this.dataSource.filter=i.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}editar(i,s,g,c,U){this.groupData.id=Number(i),this.groupData.nombre=s,this.groupData.descripcion=g,this.groupData.jerarquia=Number(c),this.groupData.proyecto_id=Number(U),this.dialogService.open(G.e,{height:"30rem",width:"50rem",data:this.groupData}).afterClosed().subscribe(ht=>{1===ht&&this.cargarGrupos()})}open(){this.dialogService.open(S,{height:"30rem",width:"50rem"}).afterClosed().subscribe(s=>{1==s&&this.cargarGrupos()})}ngOnInit(){this.cargarGrupos()}cargarGrupos(){this.groupService.getGroups().subscribe(i=>{this.dataSource=new d.by(i)})}desactivar(i,s){y().fire({title:"\xbfEsta seguro que desea Desactivar el rol: "+s+"?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(g=>{g.isConfirmed?this.groupService.desactiveGroup(Number(i)).subscribe(c=>{1==c.status&&(this.cargarGrupos(),y().fire("Ok!","Rol desactivado","success"))}):g.isDenied&&y().fire("Cambios no guardados","","info")})}verUsuarios(i,s){this.userData.id=Number(i),this.userData.nombre=s,this.groupService.getGroupsUsers(this.userData.id).subscribe(g=>{this.userData.usuarios=g,this.dialogService.open(e.Z,{height:"30rem",width:"50rem",data:this.userData})})}verRoles(i,s){this.roleData.id=Number(i),this.roleData.nombre=s,this.groupService.getGroupsRoles(this.roleData.id).subscribe(g=>{this.roleData.roles=g,this.dialogService.open(o.a,{height:"30rem",width:"50rem",data:this.roleData})})}}F.\u0275fac=function(i){return new(i||F)(t.Y36(Z.l),t.Y36(M.uw))},F.\u0275cmp=t.Xpm({type:F,selectors:[["app-group-pages"]],viewQuery:function(i,s){if(1&i&&(t.Gf(v.NW,5),t.Gf(p.YE,5)),2&i){let g;t.iGM(g=t.CRH())&&(s.paginator=g.first),t.iGM(g=t.CRH())&&(s.sort=g.first)}},decls:33,vars:7,consts:[[1,"header"],["mat-fab","","color","primary","matTooltip","Click para crear","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["matInput","","placeholder","Ej. ENEI",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombre"],["matColumnDef","descripcion"],["matColumnDef","jerarquia"],["matColumnDef","proyecto"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of users",3,"pageSizeOptions"],["mat-fab","","color","primary","matTooltip","Click para crear",1,"iconbutton",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","matTooltip","Editar","matTooltipPosition","right","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Desactivar","color","warn","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Ver usuarios","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Ver politicas","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Editar","matTooltipPosition","right","color","primary",1,"iconbutton",3,"click"],["aria-label","Edit"],["mat-icon-button","","matTooltip","Desactivar","color","warn",1,"iconbutton",3,"click"],["aria-label","Delete"],["mat-icon-button","","matTooltip","Ver usuarios","color","primary",1,"iconbutton",3,"click"],["mat-icon-button","","matTooltip","Ver politicas","color","primary",1,"iconbutton",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,s){1&i&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Roles"),t.qZA(),t.YNc(3,j,3,0,"button",1),t.qZA(),t.TgZ(4,"mat-form-field")(5,"mat-label"),t._uU(6,"Buscar"),t.qZA(),t.TgZ(7,"input",2,3),t.NdJ("keyup",function(c){return s.applyFilter(c)}),t.qZA()(),t.TgZ(9,"div",4)(10,"table",5),t.ynx(11,6),t.YNc(12,L,2,0,"th",7),t.YNc(13,W,2,1,"td",8),t.BQk(),t.ynx(14,9),t.YNc(15,Q,2,0,"th",7),t.YNc(16,q,2,1,"td",8),t.BQk(),t.ynx(17,10),t.YNc(18,k,2,0,"th",7),t.YNc(19,z,2,1,"td",8),t.BQk(),t.ynx(20,11),t.YNc(21,H,2,0,"th",7),t.YNc(22,$,2,1,"td",8),t.BQk(),t.ynx(23,12),t.YNc(24,X,2,0,"th",7),t.YNc(25,V,2,1,"td",8),t.BQk(),t.ynx(26,13),t.YNc(27,tt,2,0,"th",7),t.YNc(28,lt,5,8,"td",8),t.BQk(),t.YNc(29,ct,1,0,"tr",14),t.YNc(30,pt,1,0,"tr",15),t.YNc(31,mt,3,1,"tr",16),t.qZA(),t._UZ(32,"mat-paginator",17),t.qZA()),2&i&&(t.xp6(3),t.Q6J("ngxPermissionsOnly",t.DdM(5,dt)),t.xp6(7),t.Q6J("dataSource",s.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",s.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(6,_t)))},dependencies:[_.KE,_.hX,u.Nt,a.RK,a.cs,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,d.Ee,w.Hw,v.NW,K.gM,C.gE],styles:["table[_ngcontent-%COMP%]{width:100%;padding:1em}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;max-width:98%;margin:0 auto;display:flex}.full-width-input[_ngcontent-%COMP%]{width:100% auto;padding:1em}.example-section[_ngcontent-%COMP%]{margin:12px}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1.5rem;padding:0 .4rem;font-family:Roboto,Helvetica Neue,sans-serif}"]});const gt=[{path:"",component:F},{path:"create",component:S}];class N{}N.\u0275fac=function(i){return new(i||N)},N.\u0275mod=t.oAB({type:N}),N.\u0275inj=t.cJS({imports:[l.Bz.forChild(gt),l.Bz]});var ft=r(4657);class B{}B.\u0275fac=function(i){return new(i||B)},B.\u0275mod=t.oAB({type:B}),B.\u0275inj=t.cJS({imports:[P.ez,N,ft.M,w.Ps,K.AV,h.UX,T.LD,C.VI.forChild()]})},7559:(x,b,r)=>{r.d(b,{e:()=>C});var l=r(4006),v=r(7274),p=r(3031),d=r(5226),o=r.n(d),e=r(4650),A=r(4476),y=r(8049),G=r(6895),h=r(9549),O=r(4144),t=r(4859),Z=r(4385),R=r(3238),M=r(4954);function P(E,f){1&E&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombre de rol es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function _(E,f){1&E&&(e.TgZ(0,"mat-error"),e._uU(1,"Descripcion es "),e.TgZ(2,"strong"),e._uU(3,"requerida"),e.qZA()())}function u(E,f){if(1&E&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&E){const m=f.$implicit;e.Q6J("value",m.id),e.xp6(1),e.Oqu(m.nombre)}}function a(E,f){1&E&&(e.TgZ(0,"mat-error"),e._uU(1,"Proyecto es "),e.TgZ(2,"strong"),e._uU(3,"requerida"),e.qZA()())}function T(E,f){if(1&E){const m=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(m);const J=e.oxw();return e.KtG(J.editGroup())}),e._uU(1," Editar Grupo "),e.qZA()}if(2&E){const m=e.oxw();e.Q6J("disabled",!m.editForm.valid)}}const D=function(){return["editar-grupo"]};class C{constructor(f,m,I,J,Y){this.groupService=f,this.projectService=m,this.dialogRef=I,this.data=J,this.formBuilder=Y,this.projects=[],this.jerarquias=p.a.getHierarchys(),this.buildForm(),this.getProjects()}submit(){}buildForm(){this.editForm=this.formBuilder.group({id:[this.data.id,[l.kI.required]],nombre:[this.data.nombre,[l.kI.required]],descripcion:[this.data.descripcion],proyecto_id:[this.data.proyecto_id,[l.kI.required]]})}get Id(){return this.editForm.get("id")}get Nombre(){return this.editForm.get("nombre")}get Descripcion(){return this.editForm.get("descripcion")}get ProyectoId(){return this.editForm.get("proyecto_id")}get Jerarquia(){return this.editForm.get("jerarquia")}getProjects(){this.projectService.getProjectView().subscribe(f=>{this.projects=f})}editGroup(){this.editForm.valid&&this.groupService.editGroup(this.editForm.value).subscribe(f=>{1==f.status&&(o().fire("Ok!","Rol editado correctamente","success"),this.dialogRef.close(1))},f=>{console.log(f)})}cancelEdit(){this.dialogRef.close()}}C.\u0275fac=function(f){return new(f||C)(e.Y36(A.l),e.Y36(y.Y),e.Y36(v.so),e.Y36(v.WI),e.Y36(l.qu))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-edit-group-dialog"]],decls:30,vars:14,consts:[[1,"card"],["mat-dialog-title",""],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","text","formControlName","nombre","matInput","","placeholder","Supervisores ENEI","required","",1,"form-control"],[4,"ngIf"],["type","text","formControlName","descripcion","placeholder","Proyecto 2026","matInput","",1,"form-control"],["formControlName","proyecto_id"],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],[3,"value"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click"]],template:function(f,m){1&f&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e._UZ(3,"br")(4,"br"),e.TgZ(5,"div",2)(6,"form",3),e.NdJ("submit",function(){return m.submit()}),e.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Ingrese el Nombre del rol"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,P,4,0,"mat-error",7),e.qZA()(),e.TgZ(13,"div",4)(14,"mat-form-field",5)(15,"mat-label"),e._uU(16,"Descripcion"),e.qZA(),e._UZ(17,"input",8),e.YNc(18,_,4,0,"mat-error",7),e.qZA()(),e.TgZ(19,"div",4)(20,"mat-form-field",5)(21,"mat-label"),e._uU(22,"Seleccione un proyecto"),e.qZA(),e.TgZ(23,"mat-select",9),e.YNc(24,u,2,2,"mat-option",10),e.qZA(),e.YNc(25,a,4,0,"mat-error",7),e.qZA()(),e.TgZ(26,"div",4),e.YNc(27,T,2,1,"button",11),e.TgZ(28,"button",12),e.NdJ("click",function(){return m.cancelEdit()}),e._uU(29," Cancelar "),e.qZA()()()()()),2&f&&(e.xp6(2),e.hij("Encuesta: ",m.data.nombre,""),e.xp6(4),e.Q6J("formGroup",m.editForm),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==m.Nombre?null:m.Nombre.touched)&&(null==m.Nombre?null:m.Nombre.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==m.Descripcion?null:m.Descripcion.touched)&&(null==m.Descripcion?null:m.Descripcion.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngForOf",m.projects),e.xp6(1),e.Q6J("ngIf",(null==m.ProyectoId?null:m.ProyectoId.touched)&&(null==m.ProyectoId?null:m.ProyectoId.hasError("required"))),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(13,D)))},dependencies:[G.sg,G.O5,h.KE,h.hX,h.TO,O.Nt,t.lW,l._Y,l.Fj,l.JJ,l.JL,l.Q7,l.sg,l.u,Z.gD,R.ey,M.gE],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.full-width-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:50%}.card[_ngcontent-%COMP%]{padding:2rem}"]})},6525:(x,b,r)=>{r.d(b,{a:()=>P});var l=r(4006),v=r(7274),p=r(5226),d=r.n(p),o=r(4650),e=r(5357),A=r(4476),y=r(6895),G=r(9549),h=r(4859),O=r(6338),t=r(4954);function Z(_,u){if(1&_){const a=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){o.CHM(a);const D=o.oxw();return o.KtG(D.editGroup())}),o._uU(1," Guardar "),o.qZA()}if(2&_){const a=o.oxw();o.Q6J("disabled",!a.editForm.valid)}}function R(_,u){if(1&_&&(o.TgZ(0,"mat-list-option",13),o._uU(1),o.qZA()),2&_){const a=u.$implicit;o.Q6J("selected",a.checked)("value",a.id),o.xp6(1),o.hij(" ",a.nombre," ")}}const M=function(){return["asignar-rol-grupo"]};class P{constructor(u,a,T,D,C){this.roleService=u,this.groupService=a,this.dialogRef=T,this.data=D,this.formBuilder=C,this.checked=!1,this.roles=[],this.buildForm(),this.getRoles()}submit(){}buildForm(){this.editForm=this.formBuilder.group({grupo_id:[this.data.id,[l.kI.required]],roles:[[],[l.kI.required]]})}get Roles(){return this.editForm.get("roles")}editGroup(){this.editForm.valid&&this.groupService.editGroupRoles(this.editForm.value).subscribe(u=>{1==u.status&&(d().fire("Ok!","Politicas guardadas correctamente","success"),this.dialogRef.close(1))},u=>{console.log(u)})}getRoles(){this.roleService.getRoles().subscribe(u=>{this.roles=u,this.roles.forEach(a=>{a.checked=!1}),this.defaultRoles()})}defaultRoles(){for(let u=0;u<this.roles.length;u++)for(let a=0;a<this.data.roles.length;a++)this.roles[u].nombre==this.data.roles[a].nombre&&(this.roles[u].checked=!0)}cancelEdit(){this.dialogRef.close()}}P.\u0275fac=function(u){return new(u||P)(o.Y36(e.N),o.Y36(A.l),o.Y36(v.so),o.Y36(v.WI),o.Y36(l.qu))},P.\u0275cmp=o.Xpm({type:P,selectors:[["app-group-role-edit-dialog"]],decls:19,vars:6,consts:[[1,"card"],["mat-dialog-title",""],["mat-dialog-subtitle",""],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],[1,"example-section"],["formControlName","roles"],["rolesList",""],[3,"selected","value",4,"ngFor","ngForOf"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click"],[3,"selected","value"]],template:function(u,a){1&u&&(o.TgZ(0,"div",0)(1,"h3",1),o._uU(2),o.qZA(),o.TgZ(3,"h6",2),o._uU(4),o.qZA(),o._UZ(5,"br")(6,"br"),o.TgZ(7,"div",3)(8,"form",4),o.NdJ("submit",function(){return a.submit()}),o.TgZ(9,"div",5),o.YNc(10,Z,2,1,"button",6),o.TgZ(11,"button",7),o.NdJ("click",function(){return a.cancelEdit()}),o._uU(12," Cancelar "),o.qZA()(),o.TgZ(13,"div",8)(14,"mat-label"),o._uU(15,"Roles"),o.qZA(),o.TgZ(16,"mat-selection-list",9,10),o.YNc(18,R,2,3,"mat-list-option",11),o.qZA()()()()()),2&u&&(o.xp6(2),o.hij("Rol: ",a.data.nombre,""),o.xp6(2),o.hij("Id: ",a.data.id,""),o.xp6(4),o.Q6J("formGroup",a.editForm),o.xp6(2),o.Q6J("ngxPermissionsOnly",o.DdM(5,M)),o.xp6(8),o.Q6J("ngForOf",a.roles))},dependencies:[y.sg,G.hX,h.lW,O.Ub,O.vS,l._Y,l.JJ,l.JL,l.sg,l.u,t.gE],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.full-width-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:50%}.card[_ngcontent-%COMP%]{padding:2rem}"]})},3995:(x,b,r)=>{r.d(b,{Z:()=>P});var l=r(4006),v=r(7274),p=r(5226),d=r.n(p),o=r(4650),e=r(1692),A=r(4476),y=r(6895),G=r(9549),h=r(4859),O=r(6338),t=r(4954);function Z(_,u){if(1&_){const a=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){o.CHM(a);const D=o.oxw();return o.KtG(D.editGroup())}),o._uU(1," Guardar "),o.qZA()}if(2&_){const a=o.oxw();o.Q6J("disabled",!a.editForm.valid)}}function R(_,u){if(1&_&&(o.TgZ(0,"mat-list-option",13),o._uU(1),o.qZA()),2&_){const a=u.$implicit;o.Q6J("selected",a.checked)("value",a.id),o.xp6(1),o.hij(" ",a.username," ")}}const M=function(){return["asignar-usuario-grupo"]};class P{constructor(u,a,T,D,C){this.userService=u,this.groupService=a,this.dialogRef=T,this.data=D,this.formBuilder=C,this.checked=!1,this.users=[],this.buildForm(),this.getUsers()}submit(){}buildForm(){this.editForm=this.formBuilder.group({grupo_id:[this.data.id,[l.kI.required]],usuarios:[[],[l.kI.required]]})}get Roles(){return this.editForm.get("roles")}editGroup(){this.editForm.valid&&this.groupService.editGroupUsers(this.editForm.value).subscribe(u=>{1==u.status&&(d().fire("Ok!","Usuarios guardados correctamente","success"),this.dialogRef.close(1))},u=>{console.log(u)})}getUsers(){this.userService.getAllUserListView().subscribe(u=>{this.users=u,this.users.forEach(a=>{a.checked=!1}),this.defaultUsers()})}defaultUsers(){for(let u=0;u<this.users.length;u++)for(let a=0;a<this.data.usuarios.length;a++)this.users[u].username==this.data.usuarios[a].username&&(this.users[u].checked=!0)}cancelEdit(){this.dialogRef.close()}}P.\u0275fac=function(u){return new(u||P)(o.Y36(e.UserService),o.Y36(A.l),o.Y36(v.so),o.Y36(v.WI),o.Y36(l.qu))},P.\u0275cmp=o.Xpm({type:P,selectors:[["app-group-user-edit-dialog"]],decls:19,vars:6,consts:[[1,"card"],["mat-dialog-title",""],["mat-dialog-subtitle",""],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],[1,"example-section"],["formControlName","usuarios"],["rolesList",""],[3,"selected","value",4,"ngFor","ngForOf"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click"],[3,"selected","value"]],template:function(u,a){1&u&&(o.TgZ(0,"div",0)(1,"h3",1),o._uU(2),o.qZA(),o.TgZ(3,"h6",2),o._uU(4),o.qZA(),o._UZ(5,"br")(6,"br"),o.TgZ(7,"div",3)(8,"form",4),o.NdJ("submit",function(){return a.submit()}),o.TgZ(9,"div",5),o.YNc(10,Z,2,1,"button",6),o.TgZ(11,"button",7),o.NdJ("click",function(){return a.cancelEdit()}),o._uU(12," Cancelar "),o.qZA()(),o.TgZ(13,"div",8)(14,"mat-label"),o._uU(15,"Usuarios"),o.qZA(),o.TgZ(16,"mat-selection-list",9,10),o.YNc(18,R,2,3,"mat-list-option",11),o.qZA()()()()()),2&u&&(o.xp6(2),o.hij("Rol: ",a.data.nombre,""),o.xp6(2),o.hij("Id: ",a.data.id,""),o.xp6(4),o.Q6J("formGroup",a.editForm),o.xp6(2),o.Q6J("ngxPermissionsOnly",o.DdM(5,M)),o.xp6(8),o.Q6J("ngForOf",a.users))},dependencies:[y.sg,G.hX,h.lW,O.Ub,O.vS,l._Y,l.JJ,l.JL,l.sg,l.u,t.gE],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;max-width:98%;margin:0 auto;display:flex}.full-width-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:50%}.card[_ngcontent-%COMP%]{padding:2rem}"]})},4476:(x,b,r)=>{r.d(b,{l:()=>p});var l=r(4650),v=r(8443);class p{constructor(o){this.apiService=o}getGroups(){return this.apiService.getAll("grupos")}create(o){return this.apiService.store("grupo",o)}editGroup(o){return this.apiService.patch("grupo/edit",o)}getGroupsRoles(o){return this.apiService.getById("obtenerGruposRoles",o)}editGroupRoles(o){return this.apiService.patch("asignacionGrupoRol/edit",o)}assignGroupRoles(o){return this.apiService.store("asignarGrupoRol",o)}getGroupsUsers(o){return this.apiService.getById("obtenerGrupoUsuarios",o)}editGroupUsers(o){return this.apiService.patch("asignacionGrupoUsuario/edit",o)}assignGroupUsers(o){return this.apiService.store("asignarGrupoUsuario",o)}desactiveGroup(o){return this.apiService.desactive("grupo",o)}}p.\u0275fac=function(o){return new(o||p)(l.LFG(v.s))},p.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})},8049:(x,b,r)=>{r.d(b,{Y:()=>p});var l=r(4650),v=r(8443);class p{constructor(o){this.apiService=o}getProjects(){return this.apiService.getAll("obtenerUpmsProyecto")}getProjectView(){return this.apiService.getAll("proyectos")}desactiveProyect(o){return this.apiService.desactive("proyecto",o)}getUpms(){return this.apiService.getAll("upms")}createProject(o){return this.apiService.store("proyecto",o)}assignUpmToProject(o){return this.apiService.store("asginarUpmsProyecto",o)}editProject(o){return this.apiService.patch("proyecto/edit",o)}projectFinish(o){return this.apiService.desactive("finalizarProyecto",o)}}p.\u0275fac=function(o){return new(o||p)(l.LFG(v.s))},p.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})},5357:(x,b,r)=>{r.d(b,{N:()=>p});var l=r(4650),v=r(8443);class p{constructor(o){this.apiService=o}getPermisions(){return this.apiService.getAll("permisos")}createRol(o){return this.apiService.store("rol",o)}assignPermisoToRol(o){return this.apiService.store("asignarPermiso",o)}getRolesPermisos(o){return this.apiService.getById("asignacionesRolPermiso",o)}desactiveRole(o){return this.apiService.desactive("rol",o)}editRole(o){return this.apiService.patch("rol/edit",o)}getRoles(){return this.apiService.getAll("roles")}}p.\u0275fac=function(o){return new(o||p)(l.LFG(v.s))},p.\u0275prov=l.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"})}}]);