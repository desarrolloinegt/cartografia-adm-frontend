"use strict";(self.webpackChunkcartografia_app=self.webpackChunkcartografia_app||[]).push([[692],{1692:(Re,q,s)=>{s.r(q),s.d(q,{EditUserDialogComponent:()=>f,NewUserPageComponent:()=>_,PasswordValidation:()=>w,UserModule:()=>U,UserPageComponent:()=>h,UserRoutingModule:()=>c,UserService:()=>u});var N=s(8739),I=s(6308),l=s(7155),F=s(5226),p=s.n(F),n=s(4006),g=s(7274),e=s(4650),Y=s(529),J=s(8443);class u{constructor(r){this.apiService=r}newUser(r){return this.apiService.store("registro",r)}getAllUsers(r,t){let i=new Y.LE;return r&&t&&(i=i.set("limit",r),i=i.set("offset",t)),this.apiService.getAll("usuarios")}getAllUserListView(){return this.apiService.getAll("usuariosList")}desactiveUser(r){return this.apiService.desactive("usuario",r)}editUser(r){return this.apiService.patch("usuario/edit",r)}isAdmin(r){return this.apiService.getById("isAdmin",r)}assignAdmin(r,t){return this.apiService.store("asignarAdmin",{id:r,cadena:t})}}u.\u0275fac=function(r){return new(r||u)(e.LFG(J.s))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});var P=s(6895),m=s(9549),T=s(4144),C=s(4859),y=s(6709),Z=s(4954);function S(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"DPI es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function O(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"DPI es debe contener"),e.TgZ(2,"strong"),e._uU(3,"13 digitos"),e.qZA()())}function Q(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombres son "),e.TgZ(2,"strong"),e._uU(3,"requeridos"),e.qZA()())}function M(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Apellidos son "),e.TgZ(2,"strong"),e._uU(3,"requeridos"),e.qZA()())}function z(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Email es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function R(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Codigo de usuario es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function B(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombre de usuario es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function G(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a debe tener al menos "),e.TgZ(2,"strong"),e._uU(3," 8 caracteres, letras minusculas, letras mayusculas, numeros y caracteres especiales "),e.qZA()())}function $(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a debe tener al menos "),e.TgZ(2,"strong"),e._uU(3," 8 caracteres, letras minusculas, letras mayusculas, numeros y caracteres especiales "),e.qZA()())}function H(o,r){1&o&&(e.TgZ(0,"mat-error")(1,"strong"),e._uU(2," Las contrase\xf1as no coinciden "),e.qZA()())}function K(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editUser())}),e._uU(1," Editar Usuario "),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",!t.editForm.valid)}}const j=function(){return["editar-usuario"]};class f{constructor(r,t,i,a){this.dialogRef=r,this.data=t,this.userService=i,this.formBuilder=a,this.hide=!0,this.passwordType="password",this.loading=!1,this.checked=!1,this.buildForm()}ngOnInit(){}buildForm(){this.editForm=this.formBuilder.group({id:[this.data.id,[n.kI.required]],DPI:[this.data.DPI,[n.kI.required,n.kI.pattern(/^((\\+91-?)|0)?[0-9]{13}$/)]],nombres:[this.data.nombres,[n.kI.required]],apellidos:[this.data.apellidos,[n.kI.required]],email:[this.data.email,[n.kI.required,n.kI.email]],codigo_usuario:[this.data.codigo_usuario,[n.kI.required]],password:[{value:"",disabled:!0},[n.kI.pattern(/^(?=\D*\d)(?=[^a-z]*[a-z])(?=.*[$@$!%*?&])(?=[^A-Z]*[A-Z]).{8,30}$/)]],passwordConfirm:[{value:"",disabled:!0},[n.kI.pattern(/^(?=\D*\d)(?=[^a-z]*[a-z])(?=.*[$@$!%*?&])(?=[^A-Z]*[A-Z]).{8,30}$/),w.MatchPassword]],username:[this.data.username,[n.kI.required]]})}get Id(){return this.editForm.get("id")}get DPI(){return this.editForm.get("DPI")}get Nombres(){return this.editForm.get("nombres")}get Email(){return this.editForm.get("email")}get CodigoUsuario(){return this.editForm.get("codigo_usuario")}get Password(){return this.editForm.get("password")}get PasswordConfirm(){return this.editForm.get("passwordConfirm")}get Username(){return this.editForm.get("username")}get Apellidos(){return this.editForm.get("apellidos")}submit(){}cancelEdit(){this.dialogRef.close()}passwordStatus(r){this.checked=r,this.checked?(this.Password?.enable(),this.PasswordConfirm?.enable()):(this.Password?.disable(),this.PasswordConfirm?.disable())}editUser(){this.editForm.valid&&(this.Password?.disabled&&(this.Password.setValue(""),this.Password.enable()),this.userService.editUser(this.editForm.value).subscribe(r=>{1==r.status&&(p().fire("Ok!",r.message,"success"),this.dialogRef.close(1))},r=>{this.loading=!1,console.log(r)}),this.Password?.disable())}}function V(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"DPI es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function L(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"DPI debe contener"),e.TgZ(2,"strong"),e._uU(3," 13 digitos"),e.qZA()())}function X(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombres son "),e.TgZ(2,"strong"),e._uU(3,"requeridos"),e.qZA()())}function W(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Apellidos son "),e.TgZ(2,"strong"),e._uU(3,"requeridos"),e.qZA()())}function ee(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Email es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function te(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Codigo de usuario es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function re(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombre de usuario es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function oe(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function ne(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a debe tener al menos "),e.TgZ(2,"strong"),e._uU(3," 8 caracteres, letras minusculas, letras mayusculas, numeros y caracteres especiales "),e.qZA()())}function ie(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function ae(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a debe tener al menos "),e.TgZ(2,"strong"),e._uU(3," 8 caracteres, letras minusculas, letras mayusculas, numeros y caracteres especiales "),e.qZA()())}function se(o,r){1&o&&(e.TgZ(0,"mat-error")(1,"strong"),e._uU(2," Las contrase\xf1as no coinciden "),e.qZA()())}function le(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.registerUser())}),e._uU(1," Guardar Usuario "),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",!t.registerForm.valid)}}function ue(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancelAdd())}),e._uU(1," Cancelar "),e.qZA()}}f.\u0275fac=function(r){return new(r||f)(e.Y36(g.so),e.Y36(g.WI),e.Y36(u),e.Y36(n.qu))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-edit-user-dialog"]],decls:63,vars:15,consts:[[1,"card"],["mat-dialog-title",""],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","number","formControlName","DPI","matInput","","placeholder","2320 55634 0103","required","",1,"form-control"],[4,"ngIf"],["type","text","matInput","","formControlName","nombres","placeholder","Primer Nombre, Segundo Nombre...","required","",1,"form-control"],["type","text","formControlName","apellidos","matInput","","placeholder","Primer Apellido, Segundo Apellido...","required","",1,"form-control"],["type","email","formControlName","email","matInput","","placeholder","ejemplo.correo@gmail.com","required","",1,"form-control"],["type","number","formControlName","codigo_usuario","matInput","","placeholder","0985","required","",1,"form-control"],["type","text","formControlName","username","matInput","","placeholder","usuario2023","required","",1,"form-control"],[1,"example-margin",3,"checked","change"],["type","password","formControlName","password","matInput","","required","",1,"form-control"],["type","password","formControlName","passwordConfirm","matInput","","required","",1,"form-control"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div",2)(5,"form",3),e.NdJ("submit",function(){return t.submit()}),e.TgZ(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Ingrese su DPI"),e.qZA(),e._UZ(10,"input",6),e.YNc(11,S,4,0,"mat-error",7),e.YNc(12,O,4,0,"mat-error",7),e.qZA()(),e.TgZ(13,"div",4)(14,"mat-form-field",5)(15,"mat-label"),e._uU(16,"Ingrese su Nombre"),e.qZA(),e._UZ(17,"input",8),e.YNc(18,Q,4,0,"mat-error",7),e.qZA()(),e.TgZ(19,"div",4)(20,"mat-form-field",5)(21,"mat-label"),e._uU(22,"Ingrese su Apellido"),e.qZA(),e._UZ(23,"input",9),e.YNc(24,M,4,0,"mat-error",7),e.qZA()(),e.TgZ(25,"div",4)(26,"mat-form-field",5)(27,"mat-label"),e._uU(28,"Ingrese su Email"),e.qZA(),e._UZ(29,"input",10),e.YNc(30,z,4,0,"mat-error",7),e.qZA()(),e.TgZ(31,"div",4)(32,"mat-form-field",5)(33,"mat-label"),e._uU(34,"Ingrese el Codigo de Usuario"),e.qZA(),e._UZ(35,"input",11),e.YNc(36,R,4,0,"mat-error",7),e.qZA()(),e.TgZ(37,"div",4)(38,"mat-form-field",5)(39,"mat-label"),e._uU(40,"Ingrese el nombre de Usuario"),e.qZA(),e._UZ(41,"input",12),e.YNc(42,B,4,0,"mat-error",7),e.qZA()(),e.TgZ(43,"div",4)(44,"mat-checkbox",13),e.NdJ("change",function(a){return t.passwordStatus(a.checked)}),e._uU(45," Cambiar Contrase\xf1a "),e.qZA()(),e.TgZ(46,"div",4)(47,"mat-form-field",5)(48,"mat-label"),e._uU(49,"Ingrese contrase\xf1a"),e.qZA(),e._UZ(50,"input",14),e.YNc(51,G,4,0,"mat-error",7),e.qZA()(),e.TgZ(52,"div",4)(53,"mat-form-field",5)(54,"mat-label"),e._uU(55,"Confirme contrase\xf1a"),e.qZA(),e._UZ(56,"input",15),e.YNc(57,$,4,0,"mat-error",7),e.YNc(58,H,3,0,"mat-error",7),e.qZA()(),e.TgZ(59,"div",4),e.YNc(60,K,2,1,"button",16),e.TgZ(61,"button",17),e.NdJ("click",function(){return t.cancelEdit()}),e._uU(62," Cancelar "),e.qZA()()()()()),2&r&&(e.xp6(2),e.hij("Usuario: ",t.data.username,""),e.xp6(3),e.Q6J("formGroup",t.editForm),e.xp6(6),e.Q6J("ngIf",(null==t.DPI?null:t.DPI.touched)&&(null==t.DPI?null:t.DPI.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==t.DPI?null:t.DPI.touched)&&(null==t.DPI?null:t.DPI.hasError("pattern"))),e.xp6(6),e.Q6J("ngIf",(null==t.Nombres?null:t.Nombres.touched)&&(null==t.Nombres?null:t.Nombres.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==t.Apellidos?null:t.Apellidos.touched)&&(null==t.Apellidos?null:t.Apellidos.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==t.Email?null:t.Email.touched)&&(null==t.Email?null:t.Email.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==t.CodigoUsuario?null:t.CodigoUsuario.touched)&&(null==t.CodigoUsuario?null:t.CodigoUsuario.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==t.Username?null:t.Username.touched)&&(null==t.Username?null:t.Username.hasError("required"))),e.xp6(2),e.Q6J("checked",t.checked),e.xp6(7),e.Q6J("ngIf",(null==t.Password?null:t.Password.touched)&&(null==t.Password?null:t.Password.hasError("pattern"))),e.xp6(6),e.Q6J("ngIf",(null==t.PasswordConfirm?null:t.PasswordConfirm.touched)&&(null==t.PasswordConfirm?null:t.PasswordConfirm.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",(null==t.PasswordConfirm?null:t.PasswordConfirm.touched)&&(null==t.PasswordConfirm?null:t.PasswordConfirm.hasError("matchPassword"))),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(14,j)))},dependencies:[P.O5,m.KE,m.hX,m.TO,T.Nt,C.lW,y.oG,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.sg,n.u,Z.gE],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.full-width-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:50%}.card[_ngcontent-%COMP%]{padding:2rem}"]});const v=function(){return["crear-usuario"]};class _{constructor(r,t,i){this.userServide=r,this.formBuilder=t,this.dialogRef=i,this.buildForm()}buildForm(){this.registerForm=this.formBuilder.group({DPI:["",[n.kI.required,n.kI.pattern(/^((\\+91-?)|0)?[0-9]{13}$/)]],nombres:["",[n.kI.required]],apellidos:["",[n.kI.required]],email:["",[n.kI.required,n.kI.email]],codigo_usuario:["",[n.kI.required]],password:["",[n.kI.required,n.kI.pattern(/^(?=\D*\d)(?=[^a-z]*[a-z])(?=.*[$@$!%*?&])(?=[^A-Z]*[A-Z]).{8,30}$/)]],passwordConfirm:["",[n.kI.required,n.kI.pattern(/^(?=\D*\d)(?=[^a-z]*[a-z])(?=.*[$@$!%*?&])(?=[^A-Z]*[A-Z]).{8,30}$/),w.MatchPassword]],username:["",[n.kI.required]]})}submit(){}registerUser(){this.registerForm.valid&&(this.user=this.registerForm.value,this.userServide.newUser(this.user).subscribe(r=>{1==r.status&&(p().fire("Ok!",r.message,"success"),this.dialogRef.close(1))},r=>{console.log(r)}))}cancelAdd(){this.dialogRef.close()}get DPI(){return this.registerForm.get("DPI")}get Nombres(){return this.registerForm.get("nombres")}get Email(){return this.registerForm.get("email")}get CodigoUsuario(){return this.registerForm.get("codigo_usuario")}get Password(){return this.registerForm.get("password")}get PasswordConfirm(){return this.registerForm.get("passwordConfirm")}get Username(){return this.registerForm.get("username")}get Apellidos(){return this.registerForm.get("apellidos")}}_.\u0275fac=function(r){return new(r||_)(e.Y36(u),e.Y36(n.qu),e.Y36(g.so))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-new-user-page"]],decls:59,vars:33,consts:[[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","number","formControlName","DPI","matInput","","placeholder","2320 55634 0103","required",""],[4,"ngIf"],["type","text","matInput","","formControlName","nombres","placeholder","Primer Nombre, Segundo Nombre...","required","",1,"form-control"],["type","text","formControlName","apellidos","matInput","","placeholder","Primer Apellido, Segundo Apellido...","required","",1,"form-control"],["type","email","formControlName","email","matInput","","placeholder","ejemplo.correo@gmail.com","required","",1,"form-control"],["type","number","formControlName","codigo_usuario","matInput","","placeholder","0985","required","",1,"form-control"],["type","text","formControlName","username","matInput","","placeholder","usuario2023","required","",1,"form-control"],["type","password","formControlName","password","matInput","","required","",1,"form-control"],["type","password","formControlName","passwordConfirm","matInput","","required","",1,"form-control"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click",4,"ngxPermissionsOnly"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],["type","submit","mat-stroked-button","","color","warn",3,"click"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return t.submit()}),e.TgZ(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6,"Ingrese su DPI"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,V,4,0,"mat-error",6),e.YNc(9,L,4,0,"mat-error",6),e.qZA()(),e.TgZ(10,"div",3)(11,"mat-form-field",4)(12,"mat-label"),e._uU(13,"Ingrese su Nombre"),e.qZA(),e._UZ(14,"input",7),e.YNc(15,X,4,0,"mat-error",6),e.qZA()(),e.TgZ(16,"div",3)(17,"mat-form-field",4)(18,"mat-label"),e._uU(19,"Ingrese su Apellido"),e.qZA(),e._UZ(20,"input",8),e.YNc(21,W,4,0,"mat-error",6),e.qZA()(),e.TgZ(22,"div",3)(23,"mat-form-field",4)(24,"mat-label"),e._uU(25,"Ingrese su Email"),e.qZA(),e._UZ(26,"input",9),e.YNc(27,ee,4,0,"mat-error",6),e.qZA()(),e.TgZ(28,"div",3)(29,"mat-form-field",4)(30,"mat-label"),e._uU(31,"Ingrese el Codigo de Usuario"),e.qZA(),e._UZ(32,"input",10),e.YNc(33,te,4,0,"mat-error",6),e.qZA()(),e.TgZ(34,"div",3)(35,"mat-form-field",4)(36,"mat-label"),e._uU(37,"Ingrese el Nombre de Usuario"),e.qZA(),e._UZ(38,"input",11),e.YNc(39,re,4,0,"mat-error",6),e.qZA()(),e.TgZ(40,"div",3)(41,"mat-form-field",4)(42,"mat-label"),e._uU(43,"Ingrese Contrase\xf1a"),e.qZA(),e._UZ(44,"input",12),e.YNc(45,oe,4,0,"mat-error",6),e.YNc(46,ne,4,0,"mat-error",6),e.qZA()(),e.TgZ(47,"div",3)(48,"mat-form-field",4)(49,"mat-label"),e._uU(50,"Confirme Contrase\xf1a"),e.qZA(),e._UZ(51,"input",13),e.YNc(52,ie,4,0,"mat-error",6),e.YNc(53,ae,4,0,"mat-error",6),e.YNc(54,se,3,0,"mat-error",6),e.qZA()(),e.TgZ(55,"div",3),e.YNc(56,le,2,1,"button",14),e._UZ(57,"br"),e.YNc(58,ue,2,0,"button",15),e.qZA()()()()),2&r&&(e.xp6(2),e.Q6J("formGroup",t.registerForm),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.DPI?null:t.DPI.touched)&&(null==t.DPI?null:t.DPI.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==t.DPI?null:t.DPI.touched)&&(null==t.DPI?null:t.DPI.hasError("pattern"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.Nombres?null:t.Nombres.touched)&&(null==t.Nombres?null:t.Nombres.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.Apellidos?null:t.Apellidos.touched)&&(null==t.Apellidos?null:t.Apellidos.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.Email?null:t.Email.touched)&&(null==t.Email?null:t.Email.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.CodigoUsuario?null:t.CodigoUsuario.touched)&&(null==t.CodigoUsuario?null:t.CodigoUsuario.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.Username?null:t.Username.touched)&&(null==t.Username?null:t.Username.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.Password?null:t.Password.touched)&&(null==t.Password?null:t.Password.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==t.Password?null:t.Password.touched)&&(null==t.Password?null:t.Password.hasError("pattern"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.PasswordConfirm?null:t.PasswordConfirm.touched)&&(null==t.PasswordConfirm?null:t.PasswordConfirm.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==t.PasswordConfirm?null:t.PasswordConfirm.touched)&&(null==t.PasswordConfirm?null:t.PasswordConfirm.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",(null==t.PasswordConfirm?null:t.PasswordConfirm.touched)&&(null==t.PasswordConfirm?null:t.PasswordConfirm.hasError("matchPassword"))),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(31,v)),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(32,v)))},dependencies:[P.O5,m.KE,m.hX,m.TO,T.Nt,C.lW,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.sg,n.u,Z.gE],styles:[".full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;max-width:95%;margin:0 auto;display:flex}.example-section[_ngcontent-%COMP%]{max-width:95%;margin:0 auto;display:flex}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.card[_ngcontent-%COMP%]{padding:2rem}"]});var k=s(6338);function me(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.change())}),e._uU(1," Guardar "),e.qZA()}}const de=function(){return["crear-usuario"]};class b{constructor(r,t,i,a){this.builForm=r,this.userService=t,this.dialogRef=i,this.data=a,this.formBuilder(),this.getStatusUser(),this.checked=!1}submit(){}formBuilder(){this.superAdminForm=this.builForm.group({check:[""]})}ngOnInit(){this.getStatusUser()}getStatusUser(){this.userService.isAdmin(Number(this.data.id)).subscribe(r=>{1==r.status&&(this.checked=!0)})}get Check(){return this.superAdminForm.get("check")}change(){this.Check?.value[0]||this.Check?.setValue(["h"]),this.userService.assignAdmin(Number(this.data.id),this.Check?.value[0]).subscribe(r=>{1==r.status&&(p().fire("Ok!",r.message,"success"),this.dialogRef.close(1))})}cancel(){this.checked&&(this.checked=!1),this.dialogRef.close()}}b.\u0275fac=function(r){return new(r||b)(e.Y36(n.qu),e.Y36(u),e.Y36(g.so),e.Y36(g.WI))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-superadmin-page"]],decls:13,vars:4,consts:[[1,"card"],[1,"card-body"],[3,"formGroup","submit"],[1,"example-section"],["formControlName","check"],["admin",""],["value","Administrador",3,"selected"],[1,"form-group"],["type","submit","mat-stroked-button","","color","primary",3,"click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],["type","submit","mat-stroked-button","","color","primary",3,"click"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("submit",function(){return t.submit()}),e.TgZ(3,"div",3),e._UZ(4,"mat-label"),e.TgZ(5,"mat-selection-list",4,5)(7,"mat-list-option",6),e._uU(8," Administrador "),e.qZA()()(),e.TgZ(9,"div",7),e.YNc(10,me,2,0,"button",8),e.TgZ(11,"button",9),e.NdJ("click",function(){return t.cancel()}),e._uU(12," Cancelar "),e.qZA()()()()()),2&r&&(e.xp6(2),e.Q6J("formGroup",t.superAdminForm),e.xp6(5),e.Q6J("selected",t.checked),e.xp6(3),e.Q6J("ngxPermissionsOnly",e.DdM(3,de)))},dependencies:[m.hX,C.lW,k.Ub,k.vS,n._Y,n.JJ,n.JL,n.sg,n.u,Z.gE],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.full-width-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:50%}.card[_ngcontent-%COMP%]{padding:2rem}"]});var ce=s(7392),D=s(266);function pe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.open())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()()}}function ge(o,r){1&o&&(e.TgZ(0,"th",21),e._uU(1,"ID"),e.qZA())}function fe(o,r){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.id)}}function _e(o,r){1&o&&(e.TgZ(0,"th",21),e._uU(1,"DPI"),e.qZA())}function he(o,r){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.DPI)}}function Ue(o,r){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Nombres"),e.qZA())}function Ce(o,r){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.nombres)}}function Ze(o,r){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Apellidos"),e.qZA())}function be(o,r){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.apellidos)}}function Pe(o,r){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Usuario"),e.qZA())}function Te(o,r){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.username)}}function we(o,r){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Email"),e.qZA())}function Ae(o,r){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.email)}}function qe(o,r){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Codigo de Usuario"),e.qZA())}function Ne(o,r){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Oqu(t.codigo_usuario)}}function Ie(o,r){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Acciones"),e.qZA())}function ye(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,d=e.oxw();return e.KtG(d.editar(a.id,a.DPI,a.nombres,a.apellidos,a.email,a.codigo_usuario,a.username))}),e.TgZ(1,"mat-icon",27),e._uU(2,"edit"),e.qZA()()}}function ve(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,d=e.oxw();return e.KtG(d.desactivar(a.id,a.username))}),e.TgZ(1,"mat-icon",29),e._uU(2,"delete"),e.qZA()()}}function ke(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,d=e.oxw();return e.KtG(d.superAdmin(a.id,a.username))}),e.TgZ(1,"mat-icon"),e._uU(2,"perm_identity"),e.qZA()()}}const De=function(){return["editar-usuario"]},Ee=function(){return["desactivar-usuario"]},E=function(){return["crear-usuario"]};function xe(o,r){1&o&&(e.TgZ(0,"td",22),e.YNc(1,ye,3,0,"button",23),e.YNc(2,ve,3,0,"button",24),e.YNc(3,ke,3,0,"button",25),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(3,De)),e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(4,Ee)),e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(5,E)))}function Fe(o,r){1&o&&e._UZ(0,"tr",31)}function Ye(o,r){1&o&&e._UZ(0,"tr",32)}function Je(o,r){if(1&o&&(e.TgZ(0,"tr",33)(1,"td",34),e._uU(2),e.qZA()()),2&o){e.oxw();const t=e.MAs(8);e.xp6(2),e.hij(' No hay resultados de "',t.value,'" ')}}const Se=function(){return[5,10,25,100]};class h{constructor(r,t,i){this.userServide=r,this.formBuilder=t,this.dialogService=i,this.hide=!0,this.passwordType="password",this.loading=!1,this.displayedColumns=["id","DPI","nombres","apellidos","username","email","codigo_usuario","options"],this.dataSource=new l.by}ngOnInit(){this.cargarUsuarios()}cargarUsuarios(){this.userServide.getAllUsers().subscribe(r=>{this.dataSource=new l.by(r),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(r){this.dataSource.filter=r.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}open(){this.dialogService.open(_,{height:"50rem",width:"60rem"}).afterClosed().subscribe(t=>{1==t&&this.cargarUsuarios()})}editar(r,t,i,a,d,A,Me){this.dialogService.open(f,{height:"50rem",width:"60rem",data:{id:r,DPI:t,nombres:i,apellidos:a,email:d,codigo_usuario:A,username:Me}}).afterClosed().subscribe(ze=>{1===ze&&this.cargarUsuarios()})}superAdmin(r,t){this.dialogService.open(b,{height:"12rem",width:"40rem",data:{id:r,nombre:t}})}desactivar(r,t){p().fire({title:"\xbfEsta seguro que desea Desactivar el usuario: "+t+"?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(i=>{i.isConfirmed?this.userServide.desactiveUser(Number(r)).subscribe(a=>{1==a.status&&(this.cargarUsuarios(),p().fire("Ok!","Usuario Desactivado","success"))},a=>{this.loading=!1,console.log(a)}):i.isDenied&&p().fire("Cambios no guardados","","info")})}}h.\u0275fac=function(r){return new(r||h)(e.Y36(u),e.Y36(n.qu),e.Y36(g.uw))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-user-page"]],viewQuery:function(r,t){if(1&r&&(e.Gf(N.NW,5),e.Gf(I.YE,5)),2&r){let i;e.iGM(i=e.CRH())&&(t.paginator=i.first),e.iGM(i=e.CRH())&&(t.sort=i.first)}},decls:39,vars:7,consts:[[1,"header"],["mat-fab","","color","primary","matTooltip","Click para crear","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["matInput","","placeholder","Ejemplo: example_user",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","DPI"],["matColumnDef","nombres"],["matColumnDef","apellidos"],["matColumnDef","username"],["matColumnDef","email"],["matColumnDef","codigo_usuario"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Seleccionar usuario por p\xe1gina",3,"pageSizeOptions"],["mat-fab","","color","primary","matTooltip","Click para crear",1,"iconbutton",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","matTooltip","Click para Editar","matTooltipPosition","right","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Click para desactivar","color","warn","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Asignar como administrador","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Click para Editar","matTooltipPosition","right","color","primary",1,"iconbutton",3,"click"],["aria-label","Edit"],["mat-icon-button","","matTooltip","Click para desactivar","color","warn",1,"iconbutton",3,"click"],["aria-label","Delete"],["mat-icon-button","","matTooltip","Asignar como administrador","color","primary",1,"iconbutton",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Usuarios"),e.qZA(),e.YNc(3,pe,3,0,"button",1),e.qZA(),e.TgZ(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Buscar"),e.qZA(),e.TgZ(7,"input",2,3),e.NdJ("keyup",function(a){return t.applyFilter(a)}),e.qZA()(),e.TgZ(9,"div",4)(10,"table",5),e.ynx(11,6),e.YNc(12,ge,2,0,"th",7),e.YNc(13,fe,2,1,"td",8),e.BQk(),e.ynx(14,9),e.YNc(15,_e,2,0,"th",7),e.YNc(16,he,2,1,"td",8),e.BQk(),e.ynx(17,10),e.YNc(18,Ue,2,0,"th",7),e.YNc(19,Ce,2,1,"td",8),e.BQk(),e.ynx(20,11),e.YNc(21,Ze,2,0,"th",7),e.YNc(22,be,2,1,"td",8),e.BQk(),e.ynx(23,12),e.YNc(24,Pe,2,0,"th",7),e.YNc(25,Te,2,1,"td",8),e.BQk(),e.ynx(26,13),e.YNc(27,we,2,0,"th",7),e.YNc(28,Ae,2,1,"td",8),e.BQk(),e.ynx(29,14),e.YNc(30,qe,2,0,"th",7),e.YNc(31,Ne,2,1,"td",8),e.BQk(),e.ynx(32,15),e.YNc(33,Ie,2,0,"th",7),e.YNc(34,xe,4,6,"td",8),e.BQk(),e.YNc(35,Fe,1,0,"tr",16),e.YNc(36,Ye,1,0,"tr",17),e.YNc(37,Je,3,1,"tr",18),e.qZA(),e._UZ(38,"mat-paginator",19),e.qZA()),2&r&&(e.xp6(3),e.Q6J("ngxPermissionsOnly",e.DdM(5,E)),e.xp6(7),e.Q6J("dataSource",t.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(6,Se)))},dependencies:[m.KE,m.hX,T.Nt,C.RK,C.cs,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,ce.Hw,N.NW,D.gM,I.YE,Z.gE],styles:["table[_ngcontent-%COMP%]{width:100%;padding:1em}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;max-width:98%;margin:0 auto;display:flex}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:13%}.full-width-input[_ngcontent-%COMP%]{width:100% auto;padding:1em}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1.5rem;padding:0 .4rem;font-family:Roboto,Helvetica Neue,sans-serif}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline;padding-top:.6rem;font-weight:400}"]});class w{static MatchPassword(r){const t=r.parent;if(t){const i=t.get("password"),a=t.get("passwordConfirm");if(i&&a)return i.value!==a.value?{matchPassword:!0}:null}return null}}var x=s(9132);const Oe=[{path:"",component:h}];class c{}c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[x.Bz.forChild(Oe),x.Bz]});var Qe=s(4657);class U{}U.\u0275fac=function(r){return new(r||U)},U.\u0275mod=e.oAB({type:U}),U.\u0275inj=e.cJS({imports:[P.ez,c,Qe.M,n.UX,y.p9,D.AV,Z.VI.forChild()]})}}]);