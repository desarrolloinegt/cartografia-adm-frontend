"use strict";(self.webpackChunkcartografia_app=self.webpackChunkcartografia_app||[]).push([[12],{12:(se,T,r)=>{r.r(T),r.d(T,{NewVehiclePageComponent:()=>d,VehicleEditDialogComponent:()=>p,VehicleModule:()=>g,VehiclePageComponent:()=>h,VehicleRoutingModule:()=>s,VehicleService:()=>u});var n=r(4006),N=r(5226),f=r.n(N),e=r(4650),A=r(8443);class u{constructor(o){this.apiService=o}getVehicle(){return this.apiService.getAll("vehiculos")}createVehicle(o){return this.apiService.store("vehiculo",o)}editVechicle(o){return this.apiService.patch("vehiculo/edit",o)}desactiVehicle(o){return this.apiService.desactive("vehiculo",o)}}u.\u0275fac=function(o){return new(o||u)(e.LFG(A.s))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});var _=r(7274),C=r(6895),m=r(9549),y=r(4144),v=r(4859),Z=r(4954);function U(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Placa del vehiculo es "),e.TgZ(2,"strong"),e._uU(3,"requerida"),e.qZA()())}function q(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Placa debe tener la siguiente secuencia: "),e.TgZ(2,"strong"),e._uU(3,"A123ABC"),e.qZA()())}function F(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Modelo del vehiculo es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function E(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"A\xf1o del vehiculo es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function D(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"A\xf1o del vehiculo debe tener 4 "),e.TgZ(2,"strong"),e._uU(3,"digitos"),e.qZA()())}function M(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.createVehicle())}),e._uU(1," Guardar Vehiculo "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.vehicleForm.valid)}}function k(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.cancelAdd())}),e._uU(1," Cancelar "),e.qZA()}}const V=function(){return["crear-vehiculo"]};class d{constructor(o,t,l){this.vehicleService=o,this.formBuilder=t,this.dialogRef=l,this.buildForm()}buildForm(){this.vehicleForm=this.formBuilder.group({placa:["",[n.kI.required,n.kI.pattern(/^[A-Z]{1}([0-9]){3}[A-Z]{3}$/)]],modelo:["",n.kI.required],year:["",[n.kI.required,n.kI.pattern(/^((\\+91-?)|0)?[0-9]{4}$/)]]})}get placa(){return this.vehicleForm.get("placa")}get modelo(){return this.vehicleForm.get("modelo")}get year(){return this.vehicleForm.get("year")}submit(){}createVehicle(){this.vehicleForm.valid&&this.vehicleService.createVehicle(this.vehicleForm.value).subscribe(o=>{1==o.status&&(f().fire("Ok!",o.message,"success"),this.dialogRef.close(1))},o=>{console.log(o)})}cancelAdd(){this.dialogRef.close()}}function J(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Placa es "),e.TgZ(2,"strong"),e._uU(3,"requerida"),e.qZA()())}function Y(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Modelo es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function S(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"A\xf1o es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function O(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editSurvey())}),e._uU(1," Editar Vehiculo "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.editForm.valid)}}d.\u0275fac=function(o){return new(o||d)(e.Y36(u),e.Y36(n.qu),e.Y36(_.so))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-new-vehicle-page"]],decls:27,vars:16,consts:[[1,"card"],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","text","formControlName","placa","matInput","","placeholder","P216FMV","required","",1,"form-control"],[4,"ngIf"],["type","text","formControlName","modelo","placeholder","BMW X5","matInput","","required","",1,"form-control"],["type","number","formControlName","year","placeholder","2018","matInput","","required","",1,"form-control"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click",4,"ngxPermissionsOnly"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],["type","submit","mat-stroked-button","","color","warn",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("submit",function(){return t.submit()}),e.TgZ(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6,"Ingrese la Placa del Vehiculo"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,U,4,0,"mat-error",6),e.YNc(9,q,4,0,"mat-error",6),e.qZA()(),e.TgZ(10,"div",3)(11,"mat-form-field",4)(12,"mat-label"),e._uU(13,"Ingrese el Modelo del Vehiculo"),e.qZA(),e._UZ(14,"input",7),e.YNc(15,F,4,0,"mat-error",6),e.qZA()(),e.TgZ(16,"div",3)(17,"mat-form-field",4)(18,"mat-label"),e._uU(19,"A\xf1o"),e.qZA(),e._UZ(20,"input",8),e.YNc(21,E,4,0,"mat-error",6),e.YNc(22,D,4,0,"mat-error",6),e.qZA()(),e.TgZ(23,"div",3),e.YNc(24,M,2,1,"button",9),e._UZ(25,"br"),e.YNc(26,k,2,0,"button",10),e.qZA()()()()),2&o&&(e.xp6(2),e.Q6J("formGroup",t.vehicleForm),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.placa?null:t.placa.touched)&&(null==t.placa?null:t.placa.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==t.placa?null:t.placa.touched)&&(null==t.placa?null:t.placa.hasError("pattern"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.modelo?null:t.modelo.touched)&&(null==t.modelo?null:t.modelo.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==t.year?null:t.year.touched)&&(null==t.year?null:t.year.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==t.year?null:t.year.touched)&&(null==t.year?null:t.year.hasError("pattern"))),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(14,V)),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(15,V)))},dependencies:[C.O5,m.KE,m.hX,m.TO,y.Nt,v.lW,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.sg,n.u,Z.gE],styles:[".full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;max-width:98%;margin:0 auto;display:flex}.example-section[_ngcontent-%COMP%]{max-width:98%;margin:0 auto;display:flex}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.card[_ngcontent-%COMP%]{padding:3rem}"]});const I=function(){return["editar-vehiculo"]};class p{constructor(o,t,l,a){this.vehicleService=o,this.dialogRef=t,this.data=l,this.formBuilder=a,this.buildForm()}submit(){}buildForm(){this.editForm=this.formBuilder.group({id:[this.data.id,[n.kI.required]],placa:[this.data.placa,[n.kI.required]],modelo:[this.data.modelo,[n.kI.required]],year:[this.data.year,[n.kI.required]]})}get placa(){return this.editForm.get("placa")}get modelo(){return this.editForm.get("modelo")}get year(){return this.editForm.get("year")}editSurvey(){this.editForm.valid&&this.vehicleService.editVechicle(this.editForm.value).subscribe(o=>{1==o.status&&(f().fire("Ok!",o.message,"success"),this.dialogRef.close(1))},o=>{console.log(o)})}cancelEdit(){this.dialogRef.close()}}p.\u0275fac=function(o){return new(o||p)(e.Y36(u),e.Y36(_.so),e.Y36(_.WI),e.Y36(n.qu))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-vehicle-edit-dialog"]],decls:29,vars:7,consts:[[1,"card"],["mat-dialog-title",""],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","text","formControlName","placa","matInput","","required","",1,"form-control"],[4,"ngIf"],["type","text","formControlName","modelo","matInput","","required","",1,"form-control"],["type","text","formControlName","year","matInput","","required","",1,"form-control"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e._UZ(3,"br")(4,"br"),e.TgZ(5,"div",2)(6,"form",3),e.NdJ("submit",function(){return t.submit()}),e.TgZ(7,"div",4)(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Placa del Vehiculo "),e.qZA(),e._UZ(11,"input",6),e.YNc(12,J,4,0,"mat-error",7),e.qZA()(),e.TgZ(13,"div",4)(14,"mat-form-field",5)(15,"mat-label"),e._uU(16,"Modelo del Vehiculo"),e.qZA(),e._UZ(17,"input",8),e.YNc(18,Y,4,0,"mat-error",7),e.qZA()(),e.TgZ(19,"div",4)(20,"mat-form-field",5)(21,"mat-label"),e._uU(22,"A\xf1o del Modelo"),e.qZA(),e._UZ(23,"input",9),e.YNc(24,S,4,0,"mat-error",7),e.qZA()(),e.TgZ(25,"div",4),e.YNc(26,O,2,1,"button",10),e.TgZ(27,"button",11),e.NdJ("click",function(){return t.cancelEdit()}),e._uU(28," Cancelar "),e.qZA()()()()()),2&o&&(e.xp6(2),e.hij("Vehiculo: ",t.data.modelo,""),e.xp6(4),e.Q6J("formGroup",t.editForm),e.xp6(6),e.Q6J("ngIf",(null==t.placa?null:t.placa.touched)&&(null==t.placa?null:t.placa.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==t.modelo?null:t.modelo.touched)&&(null==t.modelo?null:t.modelo.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==t.year?null:t.year.touched)&&(null==t.year?null:t.year.hasError("required"))),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(6,I)))},dependencies:[C.O5,m.KE,m.hX,m.TO,y.Nt,v.lW,n._Y,n.Fj,n.JJ,n.JL,n.Q7,n.sg,n.u,Z.gE],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.full-width-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:50%}.card[_ngcontent-%COMP%]{padding:2rem}"]});var x=r(8739),P=r(6308),c=r(671),Q=r(7392),R=r(266);function B(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.open())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3," Crear Veh\xedculo "),e.qZA()}}function G(i,o){1&i&&(e.TgZ(0,"th",24),e._uU(1,"Placa"),e.qZA())}function z(i,o){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.placa," ")}}function H(i,o){1&i&&(e.TgZ(0,"th",24),e._uU(1," Modelo "),e.qZA())}function j(i,o){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.modelo," ")}}function K(i,o){1&i&&(e.TgZ(0,"th",24),e._uU(1,"A\xf1o"),e.qZA())}function X(i,o){if(1&i&&(e.TgZ(0,"td",25),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.hij(" ",t.year," ")}}function W(i,o){1&i&&(e.TgZ(0,"th",24),e._uU(1,"Acciones"),e.qZA())}function $(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,b=e.oxw();return e.KtG(b.editar(a.id,a.placa,a.modelo,a.year))}),e.TgZ(1,"mat-icon",29),e._uU(2,"edit"),e.qZA()()}}function L(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,b=e.oxw();return e.KtG(b.desactivar(a.id,a.modelo))}),e.TgZ(1,"mat-icon",31),e._uU(2,"delete"),e.qZA()()}}const ee=function(){return["editar-vehiculo"]},te=function(){return["desactivar-vehiculo"]};function oe(i,o){1&i&&(e.TgZ(0,"td",25),e.YNc(1,$,3,0,"button",26),e.YNc(2,L,3,0,"button",27),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(2,ee)),e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(3,te)))}function ie(i,o){1&i&&e._UZ(0,"tr",32)}function ne(i,o){1&i&&e._UZ(0,"tr",33)}function ae(i,o){if(1&i&&(e.TgZ(0,"tr",34)(1,"td",35),e._uU(2),e.qZA()()),2&i){e.oxw();const t=e.MAs(17);e.xp6(2),e.hij('No hay resultados de "',t.value,'"')}}const le=function(){return["crear-vehiculo"]},re=function(){return[5,10,25,100]};class h{constructor(o,t){this.vehicleService=o,this.dialogService=t,this.displayedColumns=["placa","modelo","year","options"],this.vehicleData={id:0,placa:"",modelo:"",year:""},this.dataSource=new c.by}applyFilter(o){this.dataSource.filter=o.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ngOnInit(){this.cargarVehiculo()}open(){this.dialogService.open(d,{height:"30rem",width:"50rem"}).afterClosed().subscribe(t=>{1==t&&this.cargarVehiculo()})}cargarVehiculo(){this.vehicleService.getVehicle().subscribe(o=>{this.dataSource=new c.by(o)})}editar(o,t,l,a){this.vehicleData.id=o,this.vehicleData.placa=t,this.vehicleData.modelo=l,this.vehicleData.year=a,this.dialogService.open(p,{height:"30rem",width:"50rem",data:this.vehicleData}).afterClosed().subscribe(me=>{1===me&&this.cargarVehiculo()})}desactivar(o,t){f().fire({title:"\xbfEsta seguro que desea Desactivar el Vehiculo: "+t+"?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(l=>{l.isConfirmed?this.vehicleService.desactiVehicle(Number(o)).subscribe(a=>{1==a.status&&(this.cargarVehiculo(),f().fire("Ok!",a.message,"success"))}):l.isDenied&&f().fire("Cambios no guardados","","info")})}}h.\u0275fac=function(o){return new(o||h)(e.Y36(u),e.Y36(_.uw))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-vehicle-page"]],viewQuery:function(o,t){if(1&o&&(e.Gf(x.NW,5),e.Gf(P.YE,5)),2&o){let l;e.iGM(l=e.CRH())&&(t.paginator=l.first),e.iGM(l=e.CRH())&&(t.sort=l.first)}},decls:39,vars:11,consts:[[1,"grid-container","container"],[1,"frow-container"],[1,"frow","row-start"],[1,"col-sm-1-1","col-sm-6-12","col-md-6-12"],[1,"col-sm-1-1","col-sm-3-12","col-md-3-12"],[1,"col-sm-1-1","col-sm-3-12","col-md-3-12",2,"text-align","right"],["mat-flat-button","","color","accent","style","margin-right: 8px;",3,"click",4,"ngxPermissionsOnly"],["appearence","outline",1,"fluid"],["matInput","","placeholder","Ejemplo: Mazda 3",3,"keyup"],["input",""],["matSuffix",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","placa"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","modelo"],["matColumnDef","year"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-flat-button","","color","accent",2,"margin-right","8px",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","matTooltip","Click para Editar","matTooltipPosition","right","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Click para desactivar","color","warn","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Click para Editar","matTooltipPosition","right","color","primary",1,"iconbutton",3,"click"],["aria-label","Edit"],["mat-icon-button","","matTooltip","Click para desactivar","color","warn",1,"iconbutton",3,"click"],["aria-label","Delete"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,t){1&o&&(e._UZ(0,"br"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2"),e._uU(6,"Veh\xedculos"),e.qZA()(),e._UZ(7,"div",4),e.TgZ(8,"div",5),e.YNc(9,B,4,0,"button",6),e.qZA()(),e._UZ(10,"br")(11,"br")(12,"br"),e.TgZ(13,"mat-form-field",7)(14,"mat-label"),e._uU(15,"Buscar"),e.qZA(),e.TgZ(16,"input",8,9),e.NdJ("keyup",function(a){return t.applyFilter(a)}),e.qZA(),e.TgZ(18,"mat-icon",10),e._uU(19,"search"),e.qZA()(),e.TgZ(20,"div",11)(21,"table",12),e.ynx(22,13),e.YNc(23,G,2,0,"th",14),e.YNc(24,z,2,1,"td",15),e.BQk(),e.ynx(25,16),e.YNc(26,H,2,0,"th",14),e.YNc(27,j,2,1,"td",15),e.BQk(),e.ynx(28,17),e.YNc(29,K,2,0,"th",14),e.YNc(30,X,2,1,"td",15),e.BQk(),e.ynx(31,18),e.YNc(32,W,2,0,"th",14),e.YNc(33,oe,3,4,"td",15),e.BQk(),e.YNc(34,ie,1,0,"tr",19),e.YNc(35,ne,1,0,"tr",20),e.YNc(36,ae,3,1,"tr",21),e.qZA(),e._UZ(37,"br")(38,"mat-paginator",22),e.qZA()()()),2&o&&(e.xp6(9),e.Q6J("ngxPermissionsOnly",e.DdM(9,le)),e.xp6(4),e.Udp("font-size",12,"px"),e.xp6(1),e.Udp("font-size",14,"px"),e.xp6(7),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(3),e.Q6J("pageSizeOptions",e.DdM(10,re)))},dependencies:[m.KE,m.hX,m.R9,y.Nt,v.lW,v.RK,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,Q.Hw,x.NW,R.gM,P.YE,Z.gE]});var w=r(9132);const ce=[{path:"",component:h}];class s{}s.\u0275fac=function(o){return new(o||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[w.Bz.forChild(ce),w.Bz]});var ue=r(4657);class g{}g.\u0275fac=function(o){return new(o||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[C.ez,s,ue.M,n.UX,Z.VI.forChild()]})}}]);