"use strict";(self.webpackChunkcartografia_app=self.webpackChunkcartografia_app||[]).push([[692],{1692:(ze,q,s)=>{s.r(q),s.d(q,{EditUserDialogComponent:()=>f,NewUserPageComponent:()=>_,PasswordValidation:()=>w,UserModule:()=>U,UserPageComponent:()=>h,UserRoutingModule:()=>d,UserService:()=>u});var N=s(8739),E=s(6308),l=s(7155),x=s(5226),p=s.n(x),n=s(4006),g=s(7274),e=s(4650),F=s(529),Y=s(8443);class u{constructor(t){this.apiService=t}newUser(t){return this.apiService.store("registro",t)}getAllUsers(t,r){let i=new F.LE;return t&&r&&(i=i.set("limit",t),i=i.set("offset",r)),this.apiService.getAll("usuarios")}getAllUserListView(){return this.apiService.getAll("usuariosList")}desactiveUser(t){return this.apiService.desactive("usuario",t)}editUser(t){return this.apiService.patch("usuario/edit",t)}isAdmin(t){return this.apiService.getById("isAdmin",t)}assignAdmin(t,r){return this.apiService.store("asignarAdmin",{id:t,cadena:r})}}u.\u0275fac=function(t){return new(t||u)(e.LFG(Y.s))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});var P=s(6895),m=s(9549),T=s(4144),C=s(4859),I=s(6709),Z=s(4954);function J(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"DPI es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function S(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"DPI es debe contener"),e.TgZ(2,"strong"),e._uU(3,"13 digitos"),e.qZA()())}function O(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombres son "),e.TgZ(2,"strong"),e._uU(3,"requeridos"),e.qZA()())}function Q(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Apellidos son "),e.TgZ(2,"strong"),e._uU(3,"requeridos"),e.qZA()())}function M(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Email es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function z(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Codigo de usuario es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function R(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombre de usuario es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function B(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a debe tener al menos "),e.TgZ(2,"strong"),e._uU(3," 8 caracteres, letras minusculas, letras mayusculas, numeros y caracteres especiales "),e.qZA()())}function G(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a debe tener al menos "),e.TgZ(2,"strong"),e._uU(3," 8 caracteres, letras minusculas, letras mayusculas, numeros y caracteres especiales "),e.qZA()())}function $(o,t){1&o&&(e.TgZ(0,"mat-error")(1,"strong"),e._uU(2," Las contrase\xf1as no coinciden "),e.qZA()())}function H(o,t){if(1&o){const r=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.editUser())}),e._uU(1," Editar Usuario "),e.qZA()}if(2&o){const r=e.oxw();e.Q6J("disabled",!r.editForm.valid)}}const j=function(){return["editar-usuario"]};class f{constructor(t,r,i,a){this.dialogRef=t,this.data=r,this.userService=i,this.formBuilder=a,this.hide=!0,this.passwordType="password",this.loading=!1,this.checked=!1,this.buildForm()}ngOnInit(){}buildForm(){this.editForm=this.formBuilder.group({id:[this.data.id,[n.kI.required]],DPI:[this.data.DPI,[n.kI.required,n.kI.pattern(/^((\\+91-?)|0)?[0-9]{13}$/)]],nombres:[this.data.nombres,[n.kI.required]],apellidos:[this.data.apellidos,[n.kI.required]],email:[this.data.email,[n.kI.required,n.kI.email]],codigo_usuario:[this.data.codigo_usuario,[n.kI.required]],password:[{value:"",disabled:!0},[n.kI.pattern(/^(?=\D*\d)(?=[^a-z]*[a-z])(?=.*[$@$!%*?&])(?=[^A-Z]*[A-Z]).{8,30}$/)]],passwordConfirm:[{value:"",disabled:!0},[n.kI.pattern(/^(?=\D*\d)(?=[^a-z]*[a-z])(?=.*[$@$!%*?&])(?=[^A-Z]*[A-Z]).{8,30}$/),w.MatchPassword]],username:[this.data.username,[n.kI.required]]})}get Id(){return this.editForm.get("id")}get DPI(){return this.editForm.get("DPI")}get Nombres(){return this.editForm.get("nombres")}get Email(){return this.editForm.get("email")}get CodigoUsuario(){return this.editForm.get("codigo_usuario")}get Password(){return this.editForm.get("password")}get PasswordConfirm(){return this.editForm.get("passwordConfirm")}get Username(){return this.editForm.get("username")}get Apellidos(){return this.editForm.get("apellidos")}submit(){}cancelEdit(){this.dialogRef.close()}passwordStatus(t){this.checked=t,this.checked?(this.Password?.enable(),this.PasswordConfirm?.enable()):(this.Password?.disable(),this.PasswordConfirm?.disable())}editUser(){this.editForm.valid&&(this.Password?.disabled&&(this.Password.setValue(""),this.Password.enable()),this.userService.editUser(this.editForm.value).subscribe(t=>{1==t.status&&(p().fire("Ok!",t.message,"success"),this.dialogRef.close(1))},t=>{this.loading=!1,console.log(t)}),this.Password?.disable())}}function K(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"DPI es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function V(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"DPI debe contener"),e.TgZ(2,"strong"),e._uU(3," 13 digitos"),e.qZA()())}function L(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombres son "),e.TgZ(2,"strong"),e._uU(3,"requeridos"),e.qZA()())}function X(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Apellidos son "),e.TgZ(2,"strong"),e._uU(3,"requeridos"),e.qZA()())}function W(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Email es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function ee(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Codigo de usuario es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function re(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombre de usuario es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function te(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function oe(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a debe tener al menos "),e.TgZ(2,"strong"),e._uU(3," 8 caracteres, letras minusculas, letras mayusculas, numeros y caracteres especiales "),e.qZA()())}function ne(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a es "),e.TgZ(2,"strong"),e._uU(3,"requerido"),e.qZA()())}function ie(o,t){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Contrase\xf1a debe tener al menos "),e.TgZ(2,"strong"),e._uU(3," 8 caracteres, letras minusculas, letras mayusculas, numeros y caracteres especiales "),e.qZA()())}function ae(o,t){1&o&&(e.TgZ(0,"mat-error")(1,"strong"),e._uU(2," Las contrase\xf1as no coinciden "),e.qZA()())}function se(o,t){if(1&o){const r=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.registerUser())}),e._uU(1," Guardar Usuario "),e.qZA()}if(2&o){const r=e.oxw();e.Q6J("disabled",!r.registerForm.valid)}}function le(o,t){if(1&o){const r=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.cancelAdd())}),e._uU(1," Cancelar "),e.qZA()}}f.\u0275fac=function(t){return new(t||f)(e.Y36(g.so),e.Y36(g.WI),e.Y36(u),e.Y36(n.qu))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-edit-user-dialog"]],decls:63,vars:15,consts:[[1,"card"],["mat-dialog-title",""],[1,"card-body"],[3,"formGroup","submit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","number","formControlName","DPI","matInput","","placeholder","2320 55634 0103","required","",1,"form-control"],[4,"ngIf"],["type","text","matInput","","formControlName","nombres","placeholder","Primer Nombre, Segundo Nombre...","required","",1,"form-control"],["type","text","formControlName","apellidos","matInput","","placeholder","Primer Apellido, Segundo Apellido...","required","",1,"form-control"],["type","email","formControlName","email","matInput","","placeholder","ejemplo.correo@gmail.com","required","",1,"form-control"],["type","number","formControlName","codigo_usuario","matInput","","placeholder","0985","required","",1,"form-control"],["type","text","formControlName","username","matInput","","placeholder","usuario2023","required","",1,"form-control"],[1,"example-margin",3,"checked","change"],["type","password","formControlName","password","matInput","","required","",1,"form-control"],["type","password","formControlName","passwordConfirm","matInput","","required","",1,"form-control"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],["type","submit","mat-stroked-button","","color","primary",3,"disabled","click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"div",2)(5,"form",3),e.NdJ("submit",function(){return r.submit()}),e.TgZ(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Ingrese su DPI"),e.qZA(),e._UZ(10,"input",6),e.YNc(11,J,4,0,"mat-error",7),e.YNc(12,S,4,0,"mat-error",7),e.qZA()(),e.TgZ(13,"div",4)(14,"mat-form-field",5)(15,"mat-label"),e._uU(16,"Ingrese su Nombre"),e.qZA(),e._UZ(17,"input",8),e.YNc(18,O,4,0,"mat-error",7),e.qZA()(),e.TgZ(19,"div",4)(20,"mat-form-field",5)(21,"mat-label"),e._uU(22,"Ingrese su Apellido"),e.qZA(),e._UZ(23,"input",9),e.YNc(24,Q,4,0,"mat-error",7),e.qZA()(),e.TgZ(25,"div",4)(26,"mat-form-field",5)(27,"mat-label"),e._uU(28,"Ingrese su Email"),e.qZA(),e._UZ(29,"input",10),e.YNc(30,M,4,0,"mat-error",7),e.qZA()(),e.TgZ(31,"div",4)(32,"mat-form-field",5)(33,"mat-label"),e._uU(34,"Ingrese el Codigo de Usuario"),e.qZA(),e._UZ(35,"input",11),e.YNc(36,z,4,0,"mat-error",7),e.qZA()(),e.TgZ(37,"div",4)(38,"mat-form-field",5)(39,"mat-label"),e._uU(40,"Ingrese el nombre de Usuario"),e.qZA(),e._UZ(41,"input",12),e.YNc(42,R,4,0,"mat-error",7),e.qZA()(),e.TgZ(43,"div",4)(44,"mat-checkbox",13),e.NdJ("change",function(a){return r.passwordStatus(a.checked)}),e._uU(45," Cambiar Contrase\xf1a "),e.qZA()(),e.TgZ(46,"div",4)(47,"mat-form-field",5)(48,"mat-label"),e._uU(49,"Ingrese contrase\xf1a"),e.qZA(),e._UZ(50,"input",14),e.YNc(51,B,4,0,"mat-error",7),e.qZA()(),e.TgZ(52,"div",4)(53,"mat-form-field",5)(54,"mat-label"),e._uU(55,"Confirme contrase\xf1a"),e.qZA(),e._UZ(56,"input",15),e.YNc(57,G,4,0,"mat-error",7),e.YNc(58,$,3,0,"mat-error",7),e.qZA()(),e.TgZ(59,"div",4),e.YNc(60,H,2,1,"button",16),e.TgZ(61,"button",17),e.NdJ("click",function(){return r.cancelEdit()}),e._uU(62," Cancelar "),e.qZA()()()()()),2&t&&(e.xp6(2),e.hij("Usuario: ",r.data.username,""),e.xp6(3),e.Q6J("formGroup",r.editForm),e.xp6(6),e.Q6J("ngIf",(null==r.DPI?null:r.DPI.touched)&&(null==r.DPI?null:r.DPI.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==r.DPI?null:r.DPI.touched)&&(null==r.DPI?null:r.DPI.hasError("pattern"))),e.xp6(6),e.Q6J("ngIf",(null==r.Nombres?null:r.Nombres.touched)&&(null==r.Nombres?null:r.Nombres.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==r.Apellidos?null:r.Apellidos.touched)&&(null==r.Apellidos?null:r.Apellidos.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==r.Email?null:r.Email.touched)&&(null==r.Email?null:r.Email.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==r.CodigoUsuario?null:r.CodigoUsuario.touched)&&(null==r.CodigoUsuario?null:r.CodigoUsuario.hasError("required"))),e.xp6(6),e.Q6J("ngIf",(null==r.Username?null:r.Username.touched)&&(null==r.Username?null:r.Username.hasError("required"))),e.xp6(2),e.Q6J("checked",r.checked),e.xp6(7),e.Q6J("ngIf",(null==r.Password?null:r.Password.touched)&&(null==r.Password?null:r.Password.hasError("pattern"))),e.xp6(6),e.Q6J("ngIf",(null==r.PasswordConfirm?null:r.PasswordConfirm.touched)&&(null==r.PasswordConfirm?null:r.PasswordConfirm.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",(null==r.PasswordConfirm?null:r.PasswordConfirm.touched)&&(null==r.PasswordConfirm?null:r.PasswordConfirm.hasError("matchPassword"))),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(14,j)))},dependencies:[P.O5,m.KE,m.hX,m.TO,T.Nt,C.lW,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.sg,n.u,I.oG,Z.gE],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.full-width-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:50%}.card[_ngcontent-%COMP%]{padding:2rem}"]});const y=function(){return["crear-usuario"]};class _{constructor(t,r,i){this.userServide=t,this.formBuilder=r,this.dialogRef=i,this.buildForm()}buildForm(){this.registerForm=this.formBuilder.group({DPI:["",[n.kI.required,n.kI.pattern(/^((\\+91-?)|0)?[0-9]{13}$/)]],nombres:["",[n.kI.required]],apellidos:["",[n.kI.required]],email:["",[n.kI.required,n.kI.email]],codigo_usuario:["",[n.kI.required]],password:["",[n.kI.required,n.kI.pattern(/^(?=\D*\d)(?=[^a-z]*[a-z])(?=.*[$@$!%*?&])(?=[^A-Z]*[A-Z]).{8,30}$/)]],passwordConfirm:["",[n.kI.required,n.kI.pattern(/^(?=\D*\d)(?=[^a-z]*[a-z])(?=.*[$@$!%*?&])(?=[^A-Z]*[A-Z]).{8,30}$/),w.MatchPassword]],username:["",[n.kI.required]]})}submit(){}registerUser(){this.registerForm.valid&&(this.user=this.registerForm.value,this.userServide.newUser(this.user).subscribe(t=>{1==t.status&&(p().fire("Ok!",t.message,"success"),this.dialogRef.close(1))},t=>{console.log(t)}))}cancelAdd(){this.dialogRef.close()}get DPI(){return this.registerForm.get("DPI")}get Nombres(){return this.registerForm.get("nombres")}get Email(){return this.registerForm.get("email")}get CodigoUsuario(){return this.registerForm.get("codigo_usuario")}get Password(){return this.registerForm.get("password")}get PasswordConfirm(){return this.registerForm.get("passwordConfirm")}get Username(){return this.registerForm.get("username")}get Apellidos(){return this.registerForm.get("apellidos")}}_.\u0275fac=function(t){return new(t||_)(e.Y36(u),e.Y36(n.qu),e.Y36(g.so))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-new-user-page"]],decls:59,vars:33,consts:[[1,"card"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["appearance","outline",1,"full-width-input"],["type","number","formControlName","DPI","matInput","","placeholder","2320 55634 0103","required",""],[4,"ngIf"],["type","text","matInput","","formControlName","nombres","placeholder","Primer Nombre, Segundo Nombre...","required","",1,"form-control"],["type","text","formControlName","apellidos","matInput","","placeholder","Primer Apellido, Segundo Apellido...","required","",1,"form-control"],["type","email","formControlName","email","matInput","","placeholder","ejemplo.correo@gmail.com","required","",1,"form-control"],["type","number","formControlName","codigo_usuario","matInput","","placeholder","0985","required","",1,"form-control"],["type","text","formControlName","username","matInput","","placeholder","usuario2023","required","",1,"form-control"],["type","password","formControlName","password","matInput","","required","",1,"form-control"],["type","password","formControlName","passwordConfirm","matInput","","required","",1,"form-control"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click",4,"ngxPermissionsOnly"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],["type","submit","mat-stroked-button","","color","warn",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return r.submit()}),e.TgZ(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e._uU(6,"Ingrese su DPI"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,K,4,0,"mat-error",6),e.YNc(9,V,4,0,"mat-error",6),e.qZA()(),e.TgZ(10,"div",3)(11,"mat-form-field",4)(12,"mat-label"),e._uU(13,"Ingrese su Nombre"),e.qZA(),e._UZ(14,"input",7),e.YNc(15,L,4,0,"mat-error",6),e.qZA()(),e.TgZ(16,"div",3)(17,"mat-form-field",4)(18,"mat-label"),e._uU(19,"Ingrese su Apellido"),e.qZA(),e._UZ(20,"input",8),e.YNc(21,X,4,0,"mat-error",6),e.qZA()(),e.TgZ(22,"div",3)(23,"mat-form-field",4)(24,"mat-label"),e._uU(25,"Ingrese su Email"),e.qZA(),e._UZ(26,"input",9),e.YNc(27,W,4,0,"mat-error",6),e.qZA()(),e.TgZ(28,"div",3)(29,"mat-form-field",4)(30,"mat-label"),e._uU(31,"Ingrese el Codigo de Usuario"),e.qZA(),e._UZ(32,"input",10),e.YNc(33,ee,4,0,"mat-error",6),e.qZA()(),e.TgZ(34,"div",3)(35,"mat-form-field",4)(36,"mat-label"),e._uU(37,"Ingrese el Nombre de Usuario"),e.qZA(),e._UZ(38,"input",11),e.YNc(39,re,4,0,"mat-error",6),e.qZA()(),e.TgZ(40,"div",3)(41,"mat-form-field",4)(42,"mat-label"),e._uU(43,"Ingrese Contrase\xf1a"),e.qZA(),e._UZ(44,"input",12),e.YNc(45,te,4,0,"mat-error",6),e.YNc(46,oe,4,0,"mat-error",6),e.qZA()(),e.TgZ(47,"div",3)(48,"mat-form-field",4)(49,"mat-label"),e._uU(50,"Confirme Contrase\xf1a"),e.qZA(),e._UZ(51,"input",13),e.YNc(52,ne,4,0,"mat-error",6),e.YNc(53,ie,4,0,"mat-error",6),e.YNc(54,ae,3,0,"mat-error",6),e.qZA()(),e.TgZ(55,"div",3),e.YNc(56,se,2,1,"button",14),e._UZ(57,"br"),e.YNc(58,le,2,0,"button",15),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",r.registerForm),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==r.DPI?null:r.DPI.touched)&&(null==r.DPI?null:r.DPI.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==r.DPI?null:r.DPI.touched)&&(null==r.DPI?null:r.DPI.hasError("pattern"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==r.Nombres?null:r.Nombres.touched)&&(null==r.Nombres?null:r.Nombres.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==r.Apellidos?null:r.Apellidos.touched)&&(null==r.Apellidos?null:r.Apellidos.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==r.Email?null:r.Email.touched)&&(null==r.Email?null:r.Email.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==r.CodigoUsuario?null:r.CodigoUsuario.touched)&&(null==r.CodigoUsuario?null:r.CodigoUsuario.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==r.Username?null:r.Username.touched)&&(null==r.Username?null:r.Username.hasError("required"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==r.Password?null:r.Password.touched)&&(null==r.Password?null:r.Password.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==r.Password?null:r.Password.touched)&&(null==r.Password?null:r.Password.hasError("pattern"))),e.xp6(3),e.Udp("font-size",16,"px"),e.xp6(3),e.Q6J("ngIf",(null==r.PasswordConfirm?null:r.PasswordConfirm.touched)&&(null==r.PasswordConfirm?null:r.PasswordConfirm.hasError("required"))),e.xp6(1),e.Q6J("ngIf",(null==r.PasswordConfirm?null:r.PasswordConfirm.touched)&&(null==r.PasswordConfirm?null:r.PasswordConfirm.hasError("pattern"))),e.xp6(1),e.Q6J("ngIf",(null==r.PasswordConfirm?null:r.PasswordConfirm.touched)&&(null==r.PasswordConfirm?null:r.PasswordConfirm.hasError("matchPassword"))),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(31,y)),e.xp6(2),e.Q6J("ngxPermissionsOnly",e.DdM(32,y)))},dependencies:[P.O5,m.KE,m.hX,m.TO,T.Nt,C.lW,n._Y,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.sg,n.u,Z.gE],styles:[".full-width-input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{width:100%;max-width:95%;margin:0 auto;display:flex}.example-section[_ngcontent-%COMP%]{max-width:95%;margin:0 auto;display:flex}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}.card[_ngcontent-%COMP%]{padding:2rem}"]});var v=s(6338);function ue(o,t){if(1&o){const r=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.change())}),e._uU(1," Guardar "),e.qZA()}}const me=function(){return["crear-usuario"]};class b{constructor(t,r,i,a){this.builForm=t,this.userService=r,this.dialogRef=i,this.data=a,this.formBuilder(),this.getStatusUser(),this.checked=!1}submit(){}formBuilder(){this.superAdminForm=this.builForm.group({check:[""]})}ngOnInit(){this.getStatusUser()}getStatusUser(){this.userService.isAdmin(Number(this.data.id)).subscribe(t=>{1==t.status&&(this.checked=!0)})}get Check(){return this.superAdminForm.get("check")}change(){this.Check?.value[0]||this.Check?.setValue(["h"]),this.userService.assignAdmin(Number(this.data.id),this.Check?.value[0]).subscribe(t=>{1==t.status&&(p().fire("Ok!",t.message,"success"),this.dialogRef.close(1))})}cancel(){this.checked&&(this.checked=!1),this.dialogRef.close()}}b.\u0275fac=function(t){return new(t||b)(e.Y36(n.qu),e.Y36(u),e.Y36(g.so),e.Y36(g.WI))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-superadmin-page"]],decls:13,vars:4,consts:[[1,"card"],[1,"card-body"],[3,"formGroup","submit"],[1,"example-section"],["formControlName","check"],["admin",""],["value","Administrador",3,"selected"],[1,"form-group"],["type","submit","mat-stroked-button","","color","primary",3,"click",4,"ngxPermissionsOnly"],["type","submit","mat-stroked-button","","color","warn",3,"click"],["type","submit","mat-stroked-button","","color","primary",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("submit",function(){return r.submit()}),e.TgZ(3,"div",3),e._UZ(4,"mat-label"),e.TgZ(5,"mat-selection-list",4,5)(7,"mat-list-option",6),e._uU(8," Administrador "),e.qZA()()(),e.TgZ(9,"div",7),e.YNc(10,ue,2,0,"button",8),e.TgZ(11,"button",9),e.NdJ("click",function(){return r.cancel()}),e._uU(12," Cancelar "),e.qZA()()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",r.superAdminForm),e.xp6(5),e.Q6J("selected",r.checked),e.xp6(3),e.Q6J("ngxPermissionsOnly",e.DdM(3,me)))},dependencies:[m.hX,C.lW,v.Ub,v.vS,n._Y,n.JJ,n.JL,n.sg,n.u,Z.gE],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.full-width-input[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{width:50%}.card[_ngcontent-%COMP%]{padding:2rem}"]});var de=s(7392),k=s(266);function ce(o,t){if(1&o){const r=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.open())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()()}}function pe(o,t){1&o&&(e.TgZ(0,"th",21),e._uU(1,"ID"),e.qZA())}function ge(o,t){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const r=t.$implicit;e.xp6(1),e.Oqu(r.id)}}function fe(o,t){1&o&&(e.TgZ(0,"th",21),e._uU(1,"DPI"),e.qZA())}function _e(o,t){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const r=t.$implicit;e.xp6(1),e.Oqu(r.DPI)}}function he(o,t){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Nombres"),e.qZA())}function Ue(o,t){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const r=t.$implicit;e.xp6(1),e.Oqu(r.nombres)}}function Ce(o,t){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Apellidos"),e.qZA())}function Ze(o,t){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const r=t.$implicit;e.xp6(1),e.Oqu(r.apellidos)}}function be(o,t){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Usuario"),e.qZA())}function Pe(o,t){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const r=t.$implicit;e.xp6(1),e.Oqu(r.username)}}function Te(o,t){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Email"),e.qZA())}function we(o,t){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const r=t.$implicit;e.xp6(1),e.Oqu(r.email)}}function Ae(o,t){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Codigo de Usuario"),e.qZA())}function qe(o,t){if(1&o&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&o){const r=t.$implicit;e.xp6(1),e.Oqu(r.codigo_usuario)}}function Ne(o,t){1&o&&(e.TgZ(0,"th",21),e._uU(1,"Acciones"),e.qZA())}function Ie(o,t){if(1&o){const r=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(r);const a=e.oxw().$implicit,c=e.oxw();return e.KtG(c.editar(a.id,a.DPI,a.nombres,a.apellidos,a.email,a.codigo_usuario,a.username))}),e.TgZ(1,"mat-icon",26),e._uU(2,"edit"),e.qZA()()}}function ye(o,t){if(1&o){const r=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(r);const a=e.oxw().$implicit,c=e.oxw();return e.KtG(c.desactivar(a.id,a.username))}),e.TgZ(1,"mat-icon",28),e._uU(2,"delete"),e.qZA()()}}const ve=function(){return["editar-usuario"]},ke=function(){return["desactivar-usuario"]};function De(o,t){1&o&&(e.TgZ(0,"td",22),e.YNc(1,Ie,3,0,"button",23),e.YNc(2,ye,3,0,"button",24),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(2,ve)),e.xp6(1),e.Q6J("ngxPermissionsOnly",e.DdM(3,ke)))}function Ee(o,t){1&o&&e._UZ(0,"tr",29)}function xe(o,t){1&o&&e._UZ(0,"tr",30)}function Fe(o,t){if(1&o&&(e.TgZ(0,"tr",31)(1,"td",32),e._uU(2),e.qZA()()),2&o){e.oxw();const r=e.MAs(8);e.xp6(2),e.hij(' No hay resultados de "',r.value,'" ')}}const Ye=function(){return["crear-usuario"]},Je=function(){return[5,10,25,100]};class h{constructor(t,r,i){this.userServide=t,this.formBuilder=r,this.dialogService=i,this.hide=!0,this.passwordType="password",this.loading=!1,this.displayedColumns=["id","DPI","nombres","apellidos","username","email","codigo_usuario","options"],this.dataSource=new l.by}ngOnInit(){this.cargarUsuarios()}cargarUsuarios(){this.userServide.getAllUsers().subscribe(t=>{this.dataSource=new l.by(t)})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}open(){this.dialogService.open(_,{height:"50rem",width:"60rem"}).afterClosed().subscribe(r=>{1==r&&this.cargarUsuarios()})}editar(t,r,i,a,c,A,Qe){this.dialogService.open(f,{height:"50rem",width:"60rem",data:{id:t,DPI:r,nombres:i,apellidos:a,email:c,codigo_usuario:A,username:Qe}}).afterClosed().subscribe(Me=>{1===Me&&this.cargarUsuarios()})}superAdmin(t,r){this.dialogService.open(b,{height:"12rem",width:"40rem",data:{id:t,nombre:r}})}desactivar(t,r){p().fire({title:"\xbfEsta seguro que desea Desactivar el usuario: "+r+"?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Si",denyButtonText:"No"}).then(i=>{i.isConfirmed?this.userServide.desactiveUser(Number(t)).subscribe(a=>{1==a.status&&(this.cargarUsuarios(),p().fire("Ok!","Usuario Desactivado","success"))},a=>{this.loading=!1,console.log(a)}):i.isDenied&&p().fire("Cambios no guardados","","info")})}}h.\u0275fac=function(t){return new(t||h)(e.Y36(u),e.Y36(n.qu),e.Y36(g.uw))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-user-page"]],viewQuery:function(t,r){if(1&t&&(e.Gf(N.NW,5),e.Gf(E.YE,5)),2&t){let i;e.iGM(i=e.CRH())&&(r.paginator=i.first),e.iGM(i=e.CRH())&&(r.sort=i.first)}},decls:39,vars:7,consts:[[1,"header"],["mat-fab","","color","primary","matTooltip","Click para crear","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["matInput","","placeholder","Ejemplo: example_user",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","DPI"],["matColumnDef","nombres"],["matColumnDef","apellidos"],["matColumnDef","username"],["matColumnDef","email"],["matColumnDef","codigo_usuario"],["matColumnDef","options"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Seleccionar usuario por p\xe1gina",3,"pageSizeOptions"],["mat-fab","","color","primary","matTooltip","Click para crear",1,"iconbutton",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","matTooltip","Click para Editar","matTooltipPosition","right","color","primary","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Click para desactivar","color","warn","class","iconbutton",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","matTooltip","Click para Editar","matTooltipPosition","right","color","primary",1,"iconbutton",3,"click"],["aria-label","Edit"],["mat-icon-button","","matTooltip","Click para desactivar","color","warn",1,"iconbutton",3,"click"],["aria-label","Delete"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Usuarios"),e.qZA(),e.YNc(3,ce,3,0,"button",1),e.qZA(),e.TgZ(4,"mat-form-field")(5,"mat-label"),e._uU(6,"Buscar"),e.qZA(),e.TgZ(7,"input",2,3),e.NdJ("keyup",function(a){return r.applyFilter(a)}),e.qZA()(),e.TgZ(9,"div",4)(10,"table",5),e.ynx(11,6),e.YNc(12,pe,2,0,"th",7),e.YNc(13,ge,2,1,"td",8),e.BQk(),e.ynx(14,9),e.YNc(15,fe,2,0,"th",7),e.YNc(16,_e,2,1,"td",8),e.BQk(),e.ynx(17,10),e.YNc(18,he,2,0,"th",7),e.YNc(19,Ue,2,1,"td",8),e.BQk(),e.ynx(20,11),e.YNc(21,Ce,2,0,"th",7),e.YNc(22,Ze,2,1,"td",8),e.BQk(),e.ynx(23,12),e.YNc(24,be,2,0,"th",7),e.YNc(25,Pe,2,1,"td",8),e.BQk(),e.ynx(26,13),e.YNc(27,Te,2,0,"th",7),e.YNc(28,we,2,1,"td",8),e.BQk(),e.ynx(29,14),e.YNc(30,Ae,2,0,"th",7),e.YNc(31,qe,2,1,"td",8),e.BQk(),e.ynx(32,15),e.YNc(33,Ne,2,0,"th",7),e.YNc(34,De,3,4,"td",8),e.BQk(),e.YNc(35,Ee,1,0,"tr",16),e.YNc(36,xe,1,0,"tr",17),e.YNc(37,Fe,3,1,"tr",18),e.qZA(),e._UZ(38,"mat-paginator",19),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngxPermissionsOnly",e.DdM(5,Ye)),e.xp6(7),e.Q6J("dataSource",r.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",r.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",r.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(6,Je)))},dependencies:[m.KE,m.hX,T.Nt,C.RK,C.cs,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,de.Hw,N.NW,k.gM,Z.gE],styles:["table[_ngcontent-%COMP%]{width:100%;padding:1em}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%;max-width:98%;margin:0 auto;display:flex}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:13%}.full-width-input[_ngcontent-%COMP%]{width:100% auto;padding:1em}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:1.5rem;padding:0 .4rem;font-family:Roboto,Helvetica Neue,sans-serif}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:inline;padding-top:.6rem;font-weight:400}"]});class w{static MatchPassword(t){const r=t.parent;if(r){const i=r.get("password"),a=r.get("passwordConfirm");if(i&&a)return i.value!==a.value?{matchPassword:!0}:null}return null}}var D=s(9132);const Se=[{path:"",component:h}];class d{}d.\u0275fac=function(t){return new(t||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[D.Bz.forChild(Se),D.Bz]});var Oe=s(4657);class U{}U.\u0275fac=function(t){return new(t||U)},U.\u0275mod=e.oAB({type:U}),U.\u0275inj=e.cJS({imports:[P.ez,d,Oe.M,n.UX,I.p9,k.AV,Z.VI.forChild()]})}}]);